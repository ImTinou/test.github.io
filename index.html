<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mini-Jeux Contre Camille Le Nul</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&family=VT323&display=swap');
        
        :root {
            --primary-color: #ff0000;
            --secondary-color: #ffff00;
            --background-dark: #000000;
            --background-light: #111111;
            --text-color: #ffffff;
            --border-color: #ffffff;
            --highlight-color: #00ffff;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background-color: var(--background-dark);
            color: var(--text-color);
            font-family: 'Press Start 2P', cursive;
            overflow: hidden;
            user-select: none;
            height: 100vh;
            width: 100vw;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        #game-container {
            width: 800px;
            height: 600px;
            position: relative;
            border: 4px solid var(--border-color);
            overflow: hidden;
            background-color: var(--background-dark);
        }
        
        /* --- ÉCRAN TITRE --- */
        #title-screen {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><rect width="50" height="50" fill="%23111"/><rect x="50" y="50" width="50" height="50" fill="%23111"/></svg>');
            background-size: 20px 20px;
            animation: backgroundScroll 10s linear infinite;
        }
        
        @keyframes backgroundScroll {
            0% { background-position: 0 0; }
            100% { background-position: 100px 100px; }
        }
        
        .game-title {
            font-size: 40px;
            margin-bottom: 40px;
            text-align: center;
            text-shadow: 0 0 10px var(--primary-color), 0 0 20px var(--primary-color);
            animation: textGlow 1.5s ease-in-out infinite alternate;
        }
        
        @keyframes textGlow {
            from { text-shadow: 0 0 5px var(--primary-color), 0 0 10px var(--primary-color); }
            to { text-shadow: 0 0 10px var(--primary-color), 0 0 20px var(--primary-color), 0 0 30px var(--primary-color); }
        }
        
        .title-camille {
            color: var(--secondary-color);
            display: block;
            margin-bottom: 10px;
            font-size: 50px;
            transform: rotate(-5deg);
        }
        
        .victory-counter {
            background-color: var(--background-light);
            color: var(--secondary-color);
            padding: 10px 15px;
            border: 2px solid var(--border-color);
            border-radius: 5px;
            font-size: 16px;
            margin-bottom: 30px;
            text-shadow: 2px 2px 2px rgba(0, 0, 0, 0.5);
        }
        
        .menu-container {
            width: 80%;
            max-width: 500px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .menu-item {
            background-color: var(--background-light);
            margin: 15px 0;
            padding: 15px;
            border: 3px solid var(--border-color);
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            font-size: 16px;
            width: 100%;
        }
        
        .menu-item:hover {
            transform: scale(1.05);
            border-color: var(--highlight-color);
            box-shadow: 0 0 15px var(--highlight-color);
        }
        
        .menu-item.selected {
            border-color: var(--secondary-color);
            box-shadow: 0 0 15px var(--secondary-color);
        }
        
        .menu-item:before {
            content: "★";
            margin-right: 15px;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .menu-item:hover:before, .menu-item.selected:before {
            opacity: 1;
        }
        
        .menu-item-icon {
            font-family: 'VT323', monospace;
            font-size: 30px;
            margin-right: 15px;
            min-width: 30px;
            text-align: center;
        }
        
        .start-button {
            margin-top: 30px;
            background-color: var(--primary-color);
            color: var(--text-color);
            border: 5px solid var(--border-color);
            border-radius: 10px;
            padding: 20px;
            width: 150px;
            font-family: 'Press Start 2P', cursive;
            font-size: 20px;
            cursor: pointer;
            transition: all 0.3s;
            animation: pulse 1.5s infinite alternate;
            z-index: 100;
            box-shadow: 0 0 20px rgba(255, 0, 0, 0.7);
            text-align: center;
            line-height: 1.5;
        }
        
        @keyframes pulse {
            from { transform: scale(1); filter: brightness(1); }
            to { transform: scale(1.1); filter: brightness(1.5); }
        }
        
        .start-button:hover {
            background-color: var(--highlight-color);
            animation: none;
            transform: scale(1.2);
            border-color: var(--secondary-color);
        }
        
        /* --- JEUX COMMUN --- */
        .game-screen {
            width: 100%;
            height: 100%;
            display: none;
            position: relative;
            overflow: hidden;
        }
        
        .back-button {
            position: absolute;
            top: 10px;
            left: 10px;
            background: none;
            border: 2px solid var(--border-color);
            color: var(--text-color);
            padding: 5px 10px;
            font-family: 'Press Start 2P', cursive;
            font-size: 10px;
            cursor: pointer;
            z-index: 100;
        }
        
        .back-button:hover {
            background-color: var(--border-color);
            color: var(--background-dark);
        }
        
        .game-victory-counter {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: rgba(0, 0, 0, 0.7);
            color: var(--secondary-color);
            border: 2px solid var(--border-color);
            padding: 5px 10px;
            font-size: 10px;
            z-index: 100;
        }

        /* --- JEU DE BLACKJACK --- */
        #blackjack-game {
            background-color: #006400; /* Vert foncé */
            font-family: 'Press Start 2P', cursive;
            display: flex;
            flex-direction: column;
            padding: 20px;
        }
        
        .blackjack-table {
            background-color: #008000; /* Vert */
            border: 10px solid #654321; /* Marron */
            border-radius: 30px;
            height: calc(100% - 40px);
            display: flex;
            flex-direction: column;
            position: relative;
            overflow: hidden;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.7) inset;
        }
        
        .dealer-area, .player-area {
            height: 45%;
            padding: 20px;
            display: flex;
            flex-direction: column;
        }
        
        .dealer-area {
            border-bottom: 5px solid #654321;
        }
        
        .dealer-title, .player-title {
            font-size: 16px;
            margin-bottom: 20px;
            color: #FFD700; /* Or */
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
        }
        
        .dealer-cards, .player-cards {
            display: flex;
            height: 120px;
        }
        
        .card-placeholder {
            width: 80px;
            height: 120px;
            margin-right: 15px;
            border: 2px dashed white;
            border-radius: 8px;
            display: flex;
            justify-content: center;
            align-items: center;
            color: rgba(255, 255, 255, 0.5);
            font-size: 10px;
        }
        
        .card {
            width: 80px;
            height: 120px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 2px 2px 8px rgba(0, 0, 0, 0.5);
            margin-right: 15px;
            position: relative;
            display: flex;
            flex-direction: column;
            padding: 5px;
            transition: transform 0.3s ease;
            cursor: default;
            animation: dealCard 0.5s;
        }
        
        @keyframes dealCard {
            from {
                transform: translateY(-100px) rotate(180deg);
                opacity: 0;
            }
            to {
                transform: translateY(0) rotate(0deg);
                opacity: 1;
            }
        }
        
        .card:hover {
            transform: translateY(-10px);
        }
        
        .card.flipped {
            background-image: linear-gradient(45deg, #ff0000 25%, #000000 25%, #000000 50%, #ff0000 50%, #ff0000 75%, #000000 75%, #000000 100%);
            background-size: 10px 10px;
        }
        
        .card-value {
            font-size: 16px;
            font-weight: bold;
        }
        
        .card-suit {
            font-size: 32px;
            margin-top: auto;
            margin-bottom: auto;
            text-align: center;
        }
        
        .card-suit.red {
            color: red;
        }
        
        .card-suit.black {
            color: black;
        }
        
        .card-info {
            margin-top: auto;
            display: flex;
            justify-content: space-between;
        }
        
        .hand-value {
            margin-top: 10px;
            font-size: 14px;
            color: white;
        }
        
        .controls-area {
            border-top: 5px solid #654321;
            height: 90px;
            padding: 15px;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
        }
        
        .control-button {
            background-color: #FFD700; /* Or */
            color: #000;
            border: none;
            padding: 10px 20px;
            font-family: 'Press Start 2P', cursive;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 4px 0 #B8860B; /* Or foncé */
            border-radius: 5px;
        }
        
        .control-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 0 #B8860B;
        }
        
        .control-button:active {
            transform: translateY(2px);
            box-shadow: 0 2px 0 #B8860B;
        }
        
        .control-button:disabled {
            background-color: #A9A9A9; /* Gris */
            box-shadow: 0 4px 0 #696969;
            cursor: not-allowed;
        }
        
        .message {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            z-index: 100;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
            display: none;
        }
        
        .message-title {
            font-size: 24px;
            margin-bottom: 10px;
            color: #FFD700;
        }
        
        .message-body {
            margin-bottom: 20px;
        }
        
        .dealer-speech {
            position: absolute;
            top: 20px;
            right: 20px;
            background-color: white;
            border-radius: 15px;
            padding: 15px;
            max-width: 200px;
            font-size: 12px;
            color: black;
            box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.3);
            opacity: 0;
            transition: opacity 0.5s;
            z-index: 10;
        }
        
        .dealer-speech:after {
            content: "";
            position: absolute;
            top: 50%;
            right: -20px;
            border: 10px solid transparent;
            border-left-color: white;
            margin-top: -10px;
        }
        
        /* --- JEU DE FRAPPE --- */
        #typing-game {
            background-color: #000080; /* Bleu nuit */
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            font-family: 'Press Start 2P', cursive;
        }
        
        .typing-header {
            width: 100%;
            display: flex;
            justify-content: space-between;
            padding: 10px;
            margin-bottom: 20px;
        }
        
        .typing-score, .typing-time {
            background-color: var(--background-light);
            padding: 10px;
            border: 2px solid var(--border-color);
            min-width: 200px;
            text-align: center;
        }
        
        .typing-arena {
            width: 100%;
            display: flex;
            justify-content: space-around;
            margin-bottom: 30px;
            align-items: flex-end;
        }
        
        .typing-player, .typing-opponent {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 40%;
        }
        
        .typing-player-avatar, .typing-opponent-avatar {
            font-size: 50px;
            margin-bottom: 10px;
            animation: bounce 1s infinite alternate;
        }
        
        @keyframes bounce {
            from { transform: translateY(0); }
            to { transform: translateY(-10px); }
        }
        
        .typing-health-bar {
            width: 100%;
            height: 20px;
            background-color: #333;
            border: 2px solid white;
            position: relative;
            overflow: hidden;
        }
        
        .typing-health-fill {
            height: 100%;
            background-color: var(--primary-color);
            width: 100%;
            transition: width 0.3s ease;
        }
        
        .typing-opponent .typing-health-fill {
            background-color: var(--highlight-color);
        }
        
        .typing-word-container {
            width: 80%;
            min-height: 150px;
            background-color: rgba(0, 0, 0, 0.7);
            border: 3px solid var(--border-color);
            margin: 20px 0;
            padding: 20px;
            text-align: center;
            position: relative;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        
        .typing-word {
            font-size: 30px;
            color: var(--text-color);
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }
        
        .typing-word.correct {
            color: #00ff00;
            transform: scale(1.2);
        }
        
        .typing-word.incorrect {
            color: var(--primary-color);
            transform: scale(1.1);
        }
        
        .typing-input {
            width: 80%;
            padding: 10px;
            font-family: 'Press Start 2P', cursive;
            font-size: 20px;
            background-color: var(--background-light);
            color: var(--text-color);
            border: 2px solid var(--border-color);
            text-align: center;
        }
        
        .typing-input:focus {
            outline: none;
            border-color: var(--highlight-color);
            box-shadow: 0 0 10px var(--highlight-color);
        }
        
        .typing-status {
            position: absolute;
            bottom: -40px;
            font-size: 14px;
            color: var(--secondary-color);
        }
        
        .typing-controls {
            margin-top: 60px;
            display: flex;
            gap: 20px;
        }
        
        .typing-button {
            background-color: var(--primary-color);
            color: var(--text-color);
            border: none;
            padding: 10px 20px;
            font-family: 'Press Start 2P', cursive;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .typing-button:hover {
            background-color: var(--highlight-color);
        }
        
        .typing-message {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 30px;
            border-radius: 10px;
            border: 3px solid var(--border-color);
            text-align: center;
            z-index: 200;
            display: none;
            min-width: 400px;
        }
        
        .typing-message-title {
            font-size: 24px;
            margin-bottom: 20px;
            color: var(--secondary-color);
        }
        
        .typing-message-body {
            margin-bottom: 30px;
            line-height: 1.5;
        }
        
        .typing-message-button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 15px 30px;
            font-family: 'Press Start 2P', cursive;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .typing-message-button:hover {
            background-color: var(--highlight-color);
            transform: scale(1.1);
        }
        
        .speech-bubble {
            position: absolute;
            background-color: white;
            color: black;
            padding: 10px;
            border-radius: 10px;
            max-width: 200px;
            font-size: 12px;
            opacity: 0;
            transition: opacity 0.3s;
            z-index: 10;
        }
        
        .player-speech {
            left: 120px;
            top: 200px;
        }
        
        .player-speech:after {
            content: "";
            position: absolute;
            left: -10px;
            top: 50%;
            border: 10px solid transparent;
            border-right-color: white;
            margin-top: -10px;
        }
        
        .opponent-speech {
            right: 120px;
            top: 200px;
        }
        
        .opponent-speech:after {
            content: "";
            position: absolute;
            right: -10px;
            top: 50%;
            border: 10px solid transparent;
            border-left-color: white;
            margin-top: -10px;
        }
        
        /* --- JEU DE PLATEFORME --- */
        #platform-game {
            background-color: #6495ED; /* Ciel bleu */
            font-family: 'Press Start 2P', cursive;
            overflow: hidden;
            position: relative;
        }
        
        .level {
            width: 100%;
            height: 100%;
            position: relative;
        }
        
        .ground {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 80px;
            background-color: #8B4513; /* Marron */
            border-top: 5px solid #556B2F; /* Vert foncé */
        }
        
        .platform {
            position: absolute;
            height: 30px;
            background-color: #8B4513; /* Marron */
            border-top: 5px solid #556B2F; /* Vert foncé */
        }
        
        .player {
            position: absolute;
            width: 40px;
            height: 60px;
            font-size: 40px;
            text-align: center;
            line-height: 60px;
            z-index: 10;
        }
        
        .enemy {
            position: absolute;
            width: 40px;
            height: 40px;
            font-size: 30px;
            text-align: center;
            line-height: 40px;
            z-index: 5;
        }
        
        .coin {
            position: absolute;
            width: 30px;
            height: 30px;
            font-size: 25px;
            text-align: center;
            line-height: 30px;
            color: gold;
            z-index: 5;
            animation: coinSpin 1s infinite alternate;
        }
        
        @keyframes coinSpin {
            from { transform: scale(1); }
            to { transform: scale(1.2); }
        }
        
        .hud {
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(0, 0, 0, 0.7);
            padding: 10px;
            border: 2px solid white;
            border-radius: 5px;
            display: flex;
            gap: 20px;
            z-index: 100;
        }
        
        .lives, .coins-counter {
            font-size: 12px;
            display: flex;
            align-items: center;
        }
        
        .lives-icon, .coins-icon {
            margin-right: 10px;
        }
        
        .game-message {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(0, 0, 0, 0.8);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            z-index: 100;
            border: 3px solid var(--border-color);
            display: none;
        }
        
        .game-message-title {
            font-size: 24px;
            margin-bottom: 20px;
            color: var(--secondary-color);
        }
        
        .game-message-body {
            margin-bottom: 20px;
            line-height: 1.5;
        }
        
        .game-message-button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 15px 30px;
            font-family: 'Press Start 2P', cursive;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .game-message-button:hover {
            background-color: var(--highlight-color);
            transform: scale(1.1);
        }
        
        .game-controls {
            position: absolute;
            bottom: 50px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 20px;
            z-index: 50;
        }
        
        .control {
            width: 60px;
            height: 60px;
            background-color: rgba(0, 0, 0, 0.5);
            border: 2px solid white;
            border-radius: 10px;
            font-size: 25px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            user-select: none;
        }
        
        .control:active {
            background-color: rgba(255, 255, 255, 0.3);
        }
        
        .control-jump {
            background-color: rgba(255, 0, 0, 0.5);
        }
        
        .camille-boss {
            position: absolute;
            width: 80px;
            height: 80px;
            font-size: 70px;
            text-align: center;
            line-height: 80px;
            z-index: 15;
            animation: bossBounce 2s infinite alternate;
        }
        
        @keyframes bossBounce {
            from { transform: translateY(0) rotate(0deg); }
            to { transform: translateY(-20px) rotate(10deg); }
        }
        
        .finish-flag {
            position: absolute;
            font-size: 60px;
            z-index: 5;
        }
        
        .pixel-transition {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: black;
            z-index: 1000;
            display: grid;
            grid-template-columns: repeat(20, 1fr);
            grid-template-rows: repeat(15, 1fr);
            opacity: 0;
            pointer-events: none;
        }
        
        .pixel {
            background-color: var(--primary-color);
        }
        
        @keyframes pixelFadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes pixelFadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }
        
        .scanline {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background-color: rgba(255, 255, 255, 0.1);
            pointer-events: none;
            z-index: 900;
            animation: scanlineMove 8s linear infinite;
        }
        
        @keyframes scanlineMove {
            from { top: -2px; }
            to { top: 600px; }
        }
        
        .vignette {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            box-shadow: inset 0 0 100px black;
            pointer-events: none;
            z-index: 800;
        }
        
        .crt-effect {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(rgba(255, 255, 255, 0.03) 50%, rgba(0, 0, 0, 0.03) 50%);
            background-size: 100% 4px;
            pointer-events: none;
            z-index: 700;
        }
    </style>
</head>
<body>
    <div id="game-container">
        <!-- Écran titre -->
        <div id="title-screen">
            <h1 class="game-title">
                <span class="title-camille">CAMILLE LE NUL</span>
                MINI-JEUX
            </h1>
            
            <div class="victory-counter">
                Victoires: <span id="total-victories">0</span>
            </div>
            
            <div class="menu-container">
                <div class="menu-item" data-game="blackjack">
                    <span class="menu-item-icon">🃏</span>
                    Blackjack vs Camille
                </div>
                <div class="menu-item" data-game="typing">
                    <span class="menu-item-icon">⌨️</span>
                    Duel de Frappe vs Camille
                </div>
                <div class="menu-item" data-game="platform">
                    <span class="menu-item-icon">🏃</span>
                    Super Camille Bros
                </div>
            </div>
            
            <button class="start-button">JOUER !</button>
        </div>
        
        <!-- Jeu de Blackjack -->
        <div id="blackjack-game" class="game-screen">
            <button class="back-button">← RETOUR</button>
            <div class="game-victory-counter">Victoires: <span id="blackjack-victories">0</span></div>
            
            <div class="blackjack-table">
                <div class="dealer-area">
                    <div class="dealer-title">CAMILLE LE NUL (Croupier)</div>
                    <div class="dealer-cards" id="dealer-cards"></div>
                    <div class="hand-value" id="dealer-value">Valeur : ?</div>
                </div>
                
                <div class="player-area">
                    <div class="player-title">VOUS</div>
                    <div class="player-cards" id="player-cards"></div>
                    <div class="hand-value" id="player-value">Valeur : 0</div>
                </div>
                
                <div class="controls-area">
                    <button class="control-button" id="hit-button">TIRER</button>
                    <button class="control-button" id="stand-button">RESTER</button>
                    <button class="control-button" id="deal-button">DISTRIBUER</button>
                </div>
                
                <div class="dealer-speech" id="dealer-speech"></div>
                
                <div class="message" id="result-message">
                    <div class="message-title" id="result-title"></div>
                    <div class="message-body" id="result-body"></div>
                    <button class="control-button" id="continue-button">CONTINUER</button>
                </div>
            </div>
        </div>
        
        <!-- Jeu de Frappe -->
        <div id="typing-game" class="game-screen">
            <button class="back-button">← RETOUR</button>
            <div class="game-victory-counter">Victoires: <span id="typing-victories">0</span></div>
            
            <div class="typing-header">
                <div class="typing-score">Score: <span id="player-score">0</span></div>
                <div class="typing-time">Temps: <span id="typing-timer">60</span>s</div>
            </div>
            
            <div class="typing-arena">
                <div class="typing-player">
                    <div class="typing-player-avatar">🧑‍💻</div>
                    <div class="typing-health-bar">
                        <div class="typing-health-fill" id="player-health"></div>
                    </div>
                </div>
                
                <div class="typing-opponent">
                    <div class="typing-opponent-avatar">👨</div>
                    <div class="typing-health-bar">
                        <div class="typing-health-fill" id="opponent-health"></div>
                    </div>
                </div>
            </div>
            
            <div class="typing-word-container">
                <div id="current-word" class="typing-word">Appuyez sur DÉMARRER</div>
                <input type="text" id="word-input" class="typing-input" placeholder="Tapez le mot ici..." disabled>
                <div id="typing-status" class="typing-status"></div>
            </div>
            
            <div class="typing-controls">
                <button id="start-typing" class="typing-button">DÉMARRER</button>
            </div>
            
            <div id="player-speech" class="speech-bubble player-speech"></div>
            <div id="opponent-speech" class="speech-bubble opponent-speech"></div>
            
            <div id="typing-message" class="typing-message">
                <div id="typing-message-title" class="typing-message-title"></div>
                <div id="typing-message-body" class="typing-message-body"></div>
                <button id="typing-message-button" class="typing-message-button">OK</button>
            </div>
        </div>
        
        <!-- Jeu de Plateforme -->
        <div id="platform-game" class="game-screen">
            <button class="back-button">← RETOUR</button>
            <div class="game-victory-counter">Victoires: <span id="platform-victories">0</span></div>
            
            <div class="hud">
                <div class="lives">
                    <span class="lives-icon">❤️</span>
                    <span id="lives-count">3</span>
                </div>
                <div class="coins-counter">
                    <span class="coins-icon">🪙</span>
                    <span id="coin-count">0</span>/<span id="total-coins">0</span>
                </div>
            </div>
            
            <div id="level" class="level">
                <div class="ground"></div>
                <div id="game-player" class="player">🏃</div>
                <!-- Les plateformes, ennemis et pièces seront ajoutés dynamiquement -->
            </div>
            
            <div class="game-controls">
                <div class="control" id="left-control">⬅️</div>
                <div class="control control-jump" id="jump-control">⬆️</div>
                <div class="control" id="right-control">➡️</div>
            </div>
            
            <div id="game-message" class="game-message">
                <div id="game-message-title" class="game-message-title"></div>
                <div id="game-message-body" class="game-message-body"></div>
                <button id="game-message-button" class="game-message-button">OK</button>
            </div>
        </div>
        
        <div class="scanline"></div>
        <div class="vignette"></div>
        <div class="crt-effect"></div>
        <div class="pixel-transition" id="transition"></div>
    </div>
    
    <script>
        // Démarrer automatiquement dès que la page est chargée
        document.addEventListener('DOMContentLoaded', () => {
            // ===== SYSTÈME PRINCIPAL DE GESTION DES JEUX =====
            const gameContainer = document.getElementById('game-container');
            const titleScreen = document.getElementById('title-screen');
            const menuItems = document.querySelectorAll('.menu-item');
            const startButton = document.querySelector('.start-button');
            const backButtons = document.querySelectorAll('.back-button');
            const transition = document.getElementById('transition');
            const totalVictoriesDisplay = document.getElementById('total-victories');
            
            // Compteurs de victoires par jeu
            const gameVictories = {
                total: 0,
                blackjack: 0,
                typing: 0,
                platform: 0
            };
            
            // Charger les victoires depuis le stockage local
            function loadVictories() {
                if (localStorage.getItem('camilleGameVictories')) {
                    const savedVictories = JSON.parse(localStorage.getItem('camilleGameVictories'));
                    gameVictories.total = savedVictories.total || 0;
                    gameVictories.blackjack = savedVictories.blackjack || 0;
                    gameVictories.typing = savedVictories.typing || 0;
                    gameVictories.platform = savedVictories.platform || 0;
                }
                
                // Mettre à jour l'affichage
                updateVictoryDisplays();
            }
            
            // Sauvegarder les victoires dans le stockage local
            function saveVictories() {
                localStorage.setItem('camilleGameVictories', JSON.stringify(gameVictories));
            }
            
            // Ajouter une victoire
            function addVictory(game) {
                gameVictories[game]++;
                gameVictories.total++;
                saveVictories();
                updateVictoryDisplays();
            }
            
            // Mettre à jour l'affichage des victoires
            function updateVictoryDisplays() {
                totalVictoriesDisplay.textContent = gameVictories.total;
                document.getElementById('blackjack-victories').textContent = gameVictories.blackjack;
                document.getElementById('typing-victories').textContent = gameVictories.typing;
                document.getElementById('platform-victories').textContent = gameVictories.platform;
            }
            
            // Charger les victoires au démarrage
            loadVictories();
            
            // État global
            let currentGame = null;
            let selectedGame = null;
            let audioContext = null;
            
            // Remplir la transition avec des pixels
            for (let i = 0; i < 300; i++) {
                const pixel = document.createElement('div');
                pixel.className = 'pixel';
                transition.appendChild(pixel);
            }
            
            // Initialiser le contexte audio lors de la première interaction
            function initAudio() {
                if (!audioContext) {
                    try {
                        audioContext = new (window.AudioContext || window.webkitAudioContext)();
                    } catch (e) {
                        console.log('Audio non disponible');
                    }
                }
            }
            
            // Sélection de jeu dans le menu
            menuItems.forEach(item => {
                item.addEventListener('click', () => {
                    // Initialiser l'audio au premier clic
                    initAudio();
                    
                    // Désélectionner l'ancien item
                    menuItems.forEach(i => i.classList.remove('selected'));
                    // Sélectionner le nouvel item
                    item.classList.add('selected');
                    selectedGame = item.getAttribute('data-game');
                    
                    // Jouer un son de sélection
                    playSound('select');
                });
            });
            
            // Présélectionner le premier jeu
            if (menuItems.length > 0) {
                menuItems[0].classList.add('selected');
                selectedGame = menuItems[0].getAttribute('data-game');
            }
            
            // Bouton de démarrage
            startButton.addEventListener('click', () => {
                // Initialiser l'audio au premier clic
                initAudio();
                
                if (!selectedGame && menuItems.length > 0) {
                    // Aucun jeu sélectionné, sélectionner le premier par défaut
                    selectedGame = menuItems[0].getAttribute('data-game');
                    menuItems[0].classList.add('selected');
                }
                
                if (selectedGame) {
                    playSound('start');
                    startGame(selectedGame);
                }
            });
            
            // Boutons de retour
            backButtons.forEach(button => {
                button.addEventListener('click', () => {
                    playSound('back');
                    returnToTitle();
                });
            });
            
            // Fonction pour démarrer un jeu
            function startGame(game) {
                currentGame = game;
                transitionToScreen(() => {
                    titleScreen.style.display = 'none';
                    document.getElementById(`${game}-game`).style.display = 'block';
                    
                    // Initialiser le jeu spécifique
                    switch (game) {
                        case 'blackjack':
                            initBlackjackGame();
                            break;
                        case 'typing':
                            initTypingGame();
                            break;
                        case 'platform':
                            initPlatformGame();
                            break;
                    }
                });
            }
            
            // Fonction pour retourner à l'écran titre
            function returnToTitle() {
                transitionToScreen(() => {
                    // Cacher tous les écrans de jeu
                    document.querySelectorAll('.game-screen').forEach(screen => {
                        screen.style.display = 'none';
                    });
                    
                    // Arrêter le jeu actuel
                    switch (currentGame) {
                        case 'blackjack':
                            stopBlackjackGame();
                            break;
                        case 'typing':
                            stopTypingGame();
                            break;
                        case 'platform':
                            stopPlatformGame();
                            break;
                    }
                    
                    // Afficher l'écran titre
                    titleScreen.style.display = 'flex';
                    currentGame = null;
                });
            }
            
            // Animation de transition entre les écrans
            function transitionToScreen(callback) {
                const pixels = transition.querySelectorAll('.pixel');
                
                // Faire apparaître les pixels dans un ordre aléatoire
                const pixelArray = Array.from(pixels);
                pixelArray.sort(() => Math.random() - 0.5);
                
                // Animation de fondu
                transition.style.opacity = '1';
                pixelArray.forEach((pixel, index) => {
                    setTimeout(() => {
                        pixel.style.backgroundColor = getRandomColor();
                    }, index * 5);
                });
                
                // Exécuter le callback au milieu de la transition
                setTimeout(() => {
                    callback();
                    
                    // Animation de disparition
                    setTimeout(() => {
                        pixelArray.forEach((pixel, index) => {
                            setTimeout(() => {
                                pixel.style.backgroundColor = 'transparent';
                            }, index * 5);
                        });
                        
                        setTimeout(() => {
                            transition.style.opacity = '0';
                        }, pixels.length * 5 + 100);
                    }, 500);
                }, pixels.length * 5 + 300);
            }
            
            // Fonction pour obtenir une couleur aléatoire
            function getRandomColor() {
                const colors = ['#ff0000', '#ffff00', '#00ffff', '#ff00ff', '#00ff00', '#0000ff'];
                return colors[Math.floor(Math.random() * colors.length)];
            }
            
            // Système de son simple
            function playSound(type) {
                if (!audioContext) return;
                
                try {
                    const oscillator = audioContext.createOscillator();
                    const gainNode = audioContext.createGain();
                    
                    oscillator.connect(gainNode);
                    gainNode.connect(audioContext.destination);
                    
                    switch (type) {
                        case 'select':
                            oscillator.type = 'square';
                            oscillator.frequency.setValueAtTime(440, audioContext.currentTime);
                            oscillator.frequency.setValueAtTime(880, audioContext.currentTime + 0.1);
                            gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
                            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.2);
                            oscillator.start();
                            oscillator.stop(audioContext.currentTime + 0.2);
                            break;
                        case 'start':
                            oscillator.type = 'square';
                            oscillator.frequency.setValueAtTime(660, audioContext.currentTime);
                            oscillator.frequency.setValueAtTime(880, audioContext.currentTime + 0.1);
                            oscillator.frequency.setValueAtTime(1320, audioContext.currentTime + 0.2);
                            gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
                            gainNode.gain.setValueAtTime(0.1, audioContext.currentTime + 0.1);
                            gainNode.gain.setValueAtTime(0.1, audioContext.currentTime + 0.2);
                            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
                            oscillator.start();
                            oscillator.stop(audioContext.currentTime + 0.3);
                            break;
                        case 'back':
                            oscillator.type = 'square';
                            oscillator.frequency.setValueAtTime(880, audioContext.currentTime);
                            oscillator.frequency.setValueAtTime(440, audioContext.currentTime + 0.1);
                            gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
                            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.2);
                            oscillator.start();
                            oscillator.stop(audioContext.currentTime + 0.2);
                            break;
                        case 'hit':
                            oscillator.type = 'sawtooth';
                            oscillator.frequency.setValueAtTime(110, audioContext.currentTime);
                            gainNode.gain.setValueAtTime(0.2, audioContext.currentTime);
                            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);
                            oscillator.start();
                            oscillator.stop(audioContext.currentTime + 0.1);
                            break;
                        case 'card':
                            oscillator.type = 'sine';
                            oscillator.frequency.setValueAtTime(600, audioContext.currentTime);
                            oscillator.frequency.setValueAtTime(400, audioContext.currentTime + 0.05);
                            gainNode.gain.setValueAtTime(0.05, audioContext.currentTime);
                            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);
                            oscillator.start();
                            oscillator.stop(audioContext.currentTime + 0.1);
                            break;
                        case 'win':
                            oscillator.type = 'square';
                            oscillator.frequency.setValueAtTime(440, audioContext.currentTime);
                            oscillator.frequency.setValueAtTime(660, audioContext.currentTime + 0.2);
                            oscillator.frequency.setValueAtTime(880, audioContext.currentTime + 0.4);
                            gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
                            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.6);
                            oscillator.start();
                            oscillator.stop(audioContext.currentTime + 0.6);
                            break;
                        case 'lose':
                            oscillator.type = 'sawtooth';
                            oscillator.frequency.setValueAtTime(440, audioContext.currentTime);
                            oscillator.frequency.setValueAtTime(220, audioContext.currentTime + 0.2);
                            oscillator.frequency.setValueAtTime(110, audioContext.currentTime + 0.4);
                            gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
                            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.6);
                            oscillator.start();
                            oscillator.stop(audioContext.currentTime + 0.6);
                            break;
                        case 'type':
                            oscillator.type = 'sine';
                            oscillator.frequency.setValueAtTime(700, audioContext.currentTime);
                            gainNode.gain.setValueAtTime(0.05, audioContext.currentTime);
                            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);
                            oscillator.start();
                            oscillator.stop(audioContext.currentTime + 0.1);
                            break;
                        case 'correct':
                            oscillator.type = 'sine';
                            oscillator.frequency.setValueAtTime(880, audioContext.currentTime);
                            oscillator.frequency.setValueAtTime(1320, audioContext.currentTime + 0.1);
                            gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
                            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.2);
                            oscillator.start();
                            oscillator.stop(audioContext.currentTime + 0.2);
                            break;
                        case 'incorrect':
                            oscillator.type = 'sawtooth';
                            oscillator.frequency.setValueAtTime(220, audioContext.currentTime);
                            oscillator.frequency.setValueAtTime(175, audioContext.currentTime + 0.1);
                            gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
                            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.2);
                            oscillator.start();
                            oscillator.stop(audioContext.currentTime + 0.2);
                            break;
                        case 'jump':
                            oscillator.type = 'square';
                            oscillator.frequency.setValueAtTime(330, audioContext.currentTime);
                            oscillator.frequency.setValueAtTime(660, audioContext.currentTime + 0.1);
                            gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
                            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.2);
                            oscillator.start();
                            oscillator.stop(audioContext.currentTime + 0.2);
                            break;
                        case 'coin':
                            oscillator.type = 'sine';
                            oscillator.frequency.setValueAtTime(880, audioContext.currentTime);
                            oscillator.frequency.setValueAtTime(1320, audioContext.currentTime + 0.05);
                            gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
                            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);
                            oscillator.start();
                            oscillator.stop(audioContext.currentTime + 0.1);
                            break;
                        case 'death':
                            oscillator.type = 'sawtooth';
                            oscillator.frequency.setValueAtTime(880, audioContext.currentTime);
                            oscillator.frequency.setValueAtTime(440, audioContext.currentTime + 0.1);
                            oscillator.frequency.setValueAtTime(220, audioContext.currentTime + 0.2);
                            oscillator.frequency.setValueAtTime(110, audioContext.currentTime + 0.3);
                            gainNode.gain.setValueAtTime(0.2, audioContext.currentTime);
                            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.4);
                            oscillator.start();
                            oscillator.stop(audioContext.currentTime + 0.4);
                            break;
                    }
                } catch (e) {
                    console.error('Audio error:', e);
                    // Échec silencieux si l'audio n'est pas disponible
                }
            }
            
            // ===== JEU DE BLACKJACK =====
            // Éléments DOM
            const dealerCards = document.getElementById('dealer-cards');
            const playerCards = document.getElementById('player-cards');
            const dealerValue = document.getElementById('dealer-value');
            const playerValue = document.getElementById('player-value');
            const hitButton = document.getElementById('hit-button');
            const standButton = document.getElementById('stand-button');
            const dealButton = document.getElementById('deal-button');
            const resultMessage = document.getElementById('result-message');
            const resultTitle = document.getElementById('result-title');
            const resultBody = document.getElementById('result-body');
            const continueButton = document.getElementById('continue-button');
            const dealerSpeech = document.getElementById('dealer-speech');
            
            // État du jeu de blackjack
            let blackjackState = {
                deck: [],
                dealerHand: [],
                playerHand: [],
                gameOver: false,
                dealersTurn: false,
                speech: [
                    "Bonjour ! Je suis Camille le nul, prêt à jouer au blackjack !",
                    "J'ai presque gagné la dernière fois !",
                    "Je suis sûr que je vais gagner cette fois !",
                    "Tu as beaucoup de chance aujourd'hui...",
                    "Est-ce que tu comptes les cartes ? C'est illégal !",
                    "Mon jeu préféré est le 21, euh je veux dire le blackjack.",
                    "As-tu vu mes cartes ? Elles sont très jolies !",
                    "Salut mon père c'est bruno mars !",
                    "J'aimerais vraiment avoir une bite dans mon cul",
                    "J'aime les petits enfants !",
                    "Je commence à comprendre pourquoi on m'appelle 'le nul'..."
                ]
            };
            
            function initBlackjackGame() {
                // Réinitialiser l'état du jeu
                blackjackState = {
                    deck: [],
                    dealerHand: [],
                    playerHand: [],
                    gameOver: false,
                    dealersTurn: false,
                    speech: blackjackState.speech
                };
                
                // Nettoyer l'interface
                dealerCards.innerHTML = '';
                playerCards.innerHTML = '';
                dealerValue.textContent = 'Valeur : ?';
                playerValue.textContent = 'Valeur : 0';
                resultMessage.style.display = 'none';
                
                // Créer un nouveau paquet de cartes
                blackjackState.deck = createDeck();
                shuffleDeck(blackjackState.deck);
                
                // Configurer les boutons
                hitButton.disabled = true;
                standButton.disabled = true;
                dealButton.disabled = false;
                
                // Ajouter les événements aux boutons
                hitButton.removeEventListener('click', handleHit);
                standButton.removeEventListener('click', handleStand);
                dealButton.removeEventListener('click', handleDeal);
                continueButton.removeEventListener('click', handleContinue);
                
                hitButton.addEventListener('click', handleHit);
                standButton.addEventListener('click', handleStand);
                dealButton.addEventListener('click', handleDeal);
                continueButton.addEventListener('click', handleContinue);
                
                // Discours aléatoire du croupier
                setTimeout(() => {
                    showDealerSpeech(blackjackState.speech[Math.floor(Math.random() * blackjackState.speech.length)]);
                }, 1000);
            }
            
            function stopBlackjackGame() {
                // Nettoyer les événements
                hitButton.removeEventListener('click', handleHit);
                standButton.removeEventListener('click', handleStand);
                dealButton.removeEventListener('click', handleDeal);
                continueButton.removeEventListener('click', handleContinue);
            }
            
            function createDeck() {
                const suits = ['♥', '♦', '♠', '♣'];
                const values = ['2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K', 'A'];
                const deck = [];
                
                for (let suit of suits) {
                    for (let value of values) {
                        deck.push({
                            suit,
                            value,
                            numericValue: getCardValue(value),
                            color: suit === '♥' || suit === '♦' ? 'red' : 'black',
                            flipped: false
                        });
                    }
                }
                
                return deck;
            }
            
            function getCardValue(value) {
                if (value === 'A') return 11; // As vaut 11 initialement
                if (['K', 'Q', 'J'].includes(value)) return 10; // Figures valent 10
                return parseInt(value); // Autres cartes valent leur valeur
            }
            
            function shuffleDeck(deck) {
                for (let i = deck.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [deck[i], deck[j]] = [deck[j], deck[i]];
                }
            }
            
            function dealCard(hand, flipped = false) {
                const card = blackjackState.deck.pop();
                card.flipped = flipped;
                hand.push(card);
                playSound('card');
                return card;
            }
            
            function calculateHandValue(hand) {
                let value = 0;
                let aces = 0;
                
                for (let card of hand) {
                    if (!card.flipped) {
                        if (card.value === 'A') {
                            aces++;
                            value += 11;
                        } else {
                            value += card.numericValue;
                        }
                    }
                }
                
                // Ajuster la valeur des as si nécessaire
                while (value > 21 && aces > 0) {
                    value -= 10; // Convertir un as de 11 à 1
                    aces--;
                }
                
                return value;
            }
            
            function handleDeal() {
                // Réinitialiser les mains
                blackjackState.dealerHand = [];
                blackjackState.playerHand = [];
                blackjackState.gameOver = false;
                blackjackState.dealersTurn = false;
                
                // Nettoyer l'interface
                dealerCards.innerHTML = '';
                playerCards.innerHTML = '';
                
                // Recréer le paquet si nécessaire
                if (blackjackState.deck.length < 10) {
                    blackjackState.deck = createDeck();
                    shuffleDeck(blackjackState.deck);
                    showDealerSpeech("Je mélange un nouveau paquet de cartes !");
                }
                
                // Distribuer les cartes
                dealCard(blackjackState.playerHand);
                dealCard(blackjackState.dealerHand);
                dealCard(blackjackState.playerHand);
                dealCard(blackjackState.dealerHand, true); // Carte face cachée
                
                // Mettre à jour l'affichage
                updateCardDisplay();
                
                // Activer les boutons
                hitButton.disabled = false;
                standButton.disabled = false;
                dealButton.disabled = true;
                
                // Vérifier le blackjack
                if (calculateHandValue(blackjackState.playerHand) === 21) {
                    standButton.click(); // Automatiquement stand si blackjack
                }
            }
            
            function updateCardDisplay() {
                // Vider les conteneurs
                dealerCards.innerHTML = '';
                playerCards.innerHTML = '';
                
                // Afficher les cartes du croupier
                blackjackState.dealerHand.forEach(card => {
                    dealerCards.appendChild(createCardElement(card));
                });
                
                // Afficher les cartes du joueur
                blackjackState.playerHand.forEach(card => {
                    playerCards.appendChild(createCardElement(card));
                });
                
                // Mettre à jour les valeurs
                const dealerHandValue = calculateHandValue(blackjackState.dealerHand);
                const playerHandValue = calculateHandValue(blackjackState.playerHand);
                
                // Afficher la valeur du joueur
                playerValue.textContent = `Valeur : ${playerHandValue}`;
                
                // Afficher la valeur du croupier (ou ? si carte cachée)
                if (blackjackState.dealerHand.some(card => card.flipped)) {
                    dealerValue.textContent = 'Valeur : ?';
                } else {
                    dealerValue.textContent = `Valeur : ${dealerHandValue}`;
                }
            }
            
            function createCardElement(card) {
                const cardElement = document.createElement('div');
                cardElement.className = 'card';
                
                if (card.flipped) {
                    cardElement.classList.add('flipped');
                    return cardElement;
                }
                
                const valueElement = document.createElement('div');
                valueElement.className = 'card-value';
                valueElement.textContent = card.value;
                valueElement.style.color = card.color;
                
                const suitElement = document.createElement('div');
                suitElement.className = `card-suit ${card.color}`;
                suitElement.textContent = card.suit;
                
                const infoElement = document.createElement('div');
                infoElement.className = 'card-info';
                
                const secondValueElement = document.createElement('div');
                secondValueElement.className = 'card-value';
                secondValueElement.textContent = card.value;
                secondValueElement.style.color = card.color;
                
                cardElement.appendChild(valueElement);
                cardElement.appendChild(suitElement);
                infoElement.appendChild(secondValueElement);
                cardElement.appendChild(infoElement);
                
                return cardElement;
            }
            
            function handleHit() {
                if (blackjackState.gameOver) return;
                
                // Distribuer une carte au joueur
                dealCard(blackjackState.playerHand);
                
                // Mettre à jour l'affichage
                updateCardDisplay();
                
                // Vérifier si le joueur a dépassé 21
                const playerValue = calculateHandValue(blackjackState.playerHand);
                if (playerValue > 21) {
                    // Joueur perd
                    endGame('lose', "Vous avez dépassé 21 !");
                }
                
                // Vérifier si le joueur a 21 (5 cartes sans dépasser)
                if (playerValue === 21 || blackjackState.playerHand.length >= 5) {
                    standButton.click();
                }
            }
            
            function handleStand() {
                if (blackjackState.gameOver) return;
                
                blackjackState.dealersTurn = true;
                
                // Retourner la carte cachée du croupier
                blackjackState.dealerHand.forEach(card => card.flipped = false);
                
                // Mettre à jour l'affichage
                updateCardDisplay();
                
                // Donner des cartes au croupier jusqu'à ce qu'il atteigne 17 ou plus
                dealerPlay();
            }
            
            function dealerPlay() {
                const dealerHandValue = calculateHandValue(blackjackState.dealerHand);
                
                if (dealerHandValue < 17) {
                    // Temporiser pour créer un effet de "réflexion"
                    setTimeout(() => {
                        dealCard(blackjackState.dealerHand);
                        updateCardDisplay();
                        dealerPlay(); // Récursif jusqu'à >= 17
                    }, 1000);
                } else {
                    determineWinner();
                }
            }
            
            function determineWinner() {
                const dealerValue = calculateHandValue(blackjackState.dealerHand);
                const playerValue = calculateHandValue(blackjackState.playerHand);
                
                // Déterminer le résultat
                if (playerValue > 21) {
                    endGame('lose', "Vous avez dépassé 21 !");
                } else if (dealerValue > 21) {
                    endGame('win', "Camille a dépassé 21 !");
                } else if (playerValue > dealerValue) {
                    endGame('win', `Vous gagnez avec ${playerValue} contre ${dealerValue} !`);
                } else if (playerValue < dealerValue) {
                    endGame('lose', `Camille gagne avec ${dealerValue} contre ${playerValue} !`);
                } else {
                    endGame('push', `Égalité avec ${playerValue} !`);
                }
            }
            
            function endGame(result, message) {
                blackjackState.gameOver = true;
                
                // Désactiver les boutons de jeu
                hitButton.disabled = true;
                standButton.disabled = true;
                
                // Définir le message
                let title, body, speech;
                
                switch (result) {
                    case 'win':
                        title = "VICTOIRE !";
                        body = message;
                        speech = "Oh non ! J'ai encore perdu ! Pas juste !";
                        playSound('win');
                        // Ajouter une victoire
                        addVictory('blackjack');
                        break;
                    case 'lose':
                        title = "DÉFAITE !";
                        body = message;
                        speech = "Ha ha ! J'ai gagné ! Je ne suis pas si nul après tout !";
                        playSound('lose');
                        break;
                    case 'push':
                        title = "ÉGALITÉ !";
                        body = message;
                        speech = "On est ex aequo ! C'est un match nul !";
                        playSound('card');
                        break;
                }
                
                // Afficher le message du croupier
                showDealerSpeech(speech);
                
                // Afficher le résultat après un court délai
                setTimeout(() => {
                    resultTitle.textContent = title;
                    resultBody.textContent = body;
                    resultMessage.style.display = 'block';
                    dealButton.disabled = true;
                }, 1500);
            }
            
            function handleContinue() {
                resultMessage.style.display = 'none';
                dealButton.disabled = false;
            }
            
            function showDealerSpeech(text) {
                dealerSpeech.textContent = text;
                dealerSpeech.style.opacity = '1';
                
                setTimeout(() => {
                    dealerSpeech.style.opacity = '0';
                }, 5000);
            }
            
            // ===== JEU DE FRAPPE =====
            const wordInput = document.getElementById('word-input');
            const currentWord = document.getElementById('current-word');
            const typingStatus = document.getElementById('typing-status');
            const playerScore = document.getElementById('player-score');
            const typingTimer = document.getElementById('typing-timer');
            const startTypingButton = document.getElementById('start-typing');
            const playerHealth = document.getElementById('player-health');
            const opponentHealth = document.getElementById('opponent-health');
            const playerSpeech = document.getElementById('player-speech');
            const opponentSpeech = document.getElementById('opponent-speech');
            const typingMessage = document.getElementById('typing-message');
            const typingMessageTitle = document.getElementById('typing-message-title');
            const typingMessageBody = document.getElementById('typing-message-body');
            const typingMessageButton = document.getElementById('typing-message-button');
            
            // Mots pour le jeu
            const words = [
                'camille', 'rapide', 'jeux', 'vitesse', 'ordinateur', 'clavier', 'souris',
                'écran', 'console', 'pixel', 'développeur', 'javascript', 'programme',
                'joueur', 'champion', 'défaite', 'victoire', 'score', 'niveau', 'temps',
                'frappe', 'apprentissage', 'compétition', 'courage', 'patience', 'dextérité',
                'réflexes', 'concentration', 'performance', 'amélioration', 'pratique',
                'habileté', 'rapidité', 'précision', 'chance', 'réaction', 'maladroit',
                'virtuose', 'débutant', 'expert', 'novice', 'maître', 'talent', 'adversaire',
                'challenge', 'duel', 'combat', 'sprint', 'endurance', 'marathon', 'turbo'
            ];
            
            // Messages amusants pour Camille
            const camilleMessages = [
                "Je suis plus rapide que toi !",
                "Mes doigts sont des éclairs !",
                "Tu ne peux pas me battre à ce jeu !",
                "Je m'entraîne tous les jours !",
                "Mon clavier est en feu !",
                "Tu tapes comme une tortue !",
                "C'est trop facile pour moi !",
                "Je suis le roi de la frappe !",
                "Tu as fait une faute, ha ha !",
                "Mes doigts sont plus rapides que ma pensée..."
            ];
            
            // Messages pour le joueur
            const playerMessages = [
                "Je vais te battre, Camille !",
                "Tu n'es pas si rapide !",
                "Regarde mes doigts voler !",
                "Tu n'as aucune chance !",
                "Je suis imbattable !",
                "Tu as l'air fatigué, Camille !",
                "Tu fais des fautes !",
                "Je suis en pleine forme !",
                "Tu ne mérites pas ton nom !",
                "Je tape plus vite que mon ombre !"
            ];
            
            // État du jeu de frappe
            let typingState = {
                currentWord: '',
                score: 0,
                timeLeft: 60,
                gameActive: false,
                playerHealth: 100,
                opponentHealth: 100,
                timerInterval: null,
                computerSpeed: 1.5, // Temps moyen en secondes par mot
                computerWaitTime: 0,
                computerWordCount: 0,
                usedWords: []
            };
            
            function initTypingGame() {
                // Réinitialiser l'état
                typingState = {
                    currentWord: '',
                    score: 0,
                    timeLeft: 60,
                    gameActive: false,
                    playerHealth: 100,
                    opponentHealth: 100,
                    timerInterval: null,
                    computerSpeed: 1.5,
                    computerWaitTime: 0,
                    computerWordCount: 0,
                    usedWords: []
                };
                
                // Réinitialiser l'interface
                playerScore.textContent = '0';
                typingTimer.textContent = '60';
                currentWord.textContent = 'Appuyez sur DÉMARRER';
                currentWord.className = 'typing-word';
                wordInput.value = '';
                wordInput.disabled = true;
                typingStatus.textContent = '';
                playerHealth.style.width = '100%';
                opponentHealth.style.width = '100%';
                
                // Ajouter les événements
                startTypingButton.removeEventListener('click', startTypingGame);
                startTypingButton.addEventListener('click', startTypingGame);
                
                wordInput.removeEventListener('input', checkWord);
                typingMessageButton.removeEventListener('click', handleTypingMessageClose);
                typingMessageButton.addEventListener('click', handleTypingMessageClose);
                
                // Masquer le message
                typingMessage.style.display = 'none';
                
                // Afficher un message de bienvenue
                showOpponentSpeech("Prêt à taper ? Je suis imbattable !");
            }
            
            function stopTypingGame() {
                // Arrêter le timer
                if (typingState.timerInterval) {
                    clearInterval(typingState.timerInterval);
                    typingState.timerInterval = null;
                }
                
                // Supprimer les événements
                startTypingButton.removeEventListener('click', startTypingGame);
                wordInput.removeEventListener('input', checkWord);
                typingMessageButton.removeEventListener('click', handleTypingMessageClose);
                
                // Réinitialiser l'interface
                wordInput.disabled = true;
            }
            
            function startTypingGame() {
                if (typingState.gameActive) return;
                
                typingState.gameActive = true;
                typingState.score = 0;
                typingState.timeLeft = 60;
                typingState.playerHealth = 100;
                typingState.opponentHealth = 100;
                typingState.usedWords = [];
                
                // Mettre à jour l'interface
                playerScore.textContent = '0';
                typingTimer.textContent = '60';
                playerHealth.style.width = '100%';
                opponentHealth.style.width = '100%';
                
                // Activer le champ de saisie
                wordInput.disabled = false;
                wordInput.focus();
                
                // Configurer les événements
                wordInput.addEventListener('input', checkWord);
                
                // Générer le premier mot
                generateWord();
                
                // Démarrer le timer
                typingState.timerInterval = setInterval(updateTimer, 1000);
                
                // Démarrer la simulation de l'adversaire
                simulateOpponent();
                
                // Changer le texte du bouton
                startTypingButton.textContent = 'EN COURS...';
                startTypingButton.disabled = true;
                
                // Afficher un message
                showOpponentSpeech("C'est parti ! Essaie de me suivre !");
                showPlayerSpeech("Je vais te montrer !");
            }
            
            function generateWord() {
                // Choisir un mot qui n'a pas été utilisé récemment
                let newWord;
                do {
                    newWord = words[Math.floor(Math.random() * words.length)];
                } while (typingState.usedWords.includes(newWord) && typingState.usedWords.length < words.length / 2);
                
                // Ajouter le mot à la liste des mots utilisés
                typingState.usedWords.push(newWord);
                if (typingState.usedWords.length > 10) {
                    typingState.usedWords.shift(); // Garder la liste à une taille raisonnable
                }
                
                typingState.currentWord = newWord;
                currentWord.textContent = newWord;
                wordInput.value = '';
                
                // Réinitialiser la classe
                currentWord.className = 'typing-word';
            }
            
            function checkWord() {
                const userInput = wordInput.value.toLowerCase().trim();
                
                if (userInput === typingState.currentWord) {
                    // Mot correct
                    typingState.score++;
                    playerScore.textContent = typingState.score;
                    
                    // Effet visuel
                    currentWord.className = 'typing-word correct';
                    setTimeout(() => {
                        generateWord();
                    }, 300);
                    
                    // Jouer un son
                    playSound('correct');
                    
                    // Dégâts à l'adversaire
                    typingState.opponentHealth -= 5;
                    if (typingState.opponentHealth < 0) typingState.opponentHealth = 0;
                    opponentHealth.style.width = `${typingState.opponentHealth}%`;
                    
                    // Vérifier victoire
                    if (typingState.opponentHealth <= 0) {
                        endTypingGame('win');
                    }
                    
                    // Message de statut
                    typingStatus.textContent = 'Correct !';
                    
                    // Message aléatoire du joueur
                    if (Math.random() < 0.3) {
                        showPlayerSpeech(playerMessages[Math.floor(Math.random() * playerMessages.length)]);
                    }
                } else if (userInput.length >= typingState.currentWord.length) {
                    // Mot incorrect
                    currentWord.className = 'typing-word incorrect';
                    setTimeout(() => {
                        currentWord.className = 'typing-word';
                    }, 300);
                    
                    // Jouer un son
                    playSound('incorrect');
                    
                    // Message de statut
                    typingStatus.textContent = 'Incorrect !';
                    
                    // Message aléatoire de l'adversaire
                    if (Math.random() < 0.3) {
                        showOpponentSpeech(camilleMessages[Math.floor(Math.random() * camilleMessages.length)]);
                    }
                }
            }
            
            function simulateOpponent() {
                if (!typingState.gameActive) return;
                
                // Déterminer quand l'ordinateur va "taper" le prochain mot
                typingState.computerWaitTime = Math.random() * 1000 + typingState.computerSpeed * 1000; // 1.5-2.5 secondes par mot
                
                setTimeout(() => {
                    if (!typingState.gameActive) return;
                    
                    // L'ordinateur a tapé un mot
                    typingState.computerWordCount++;
                    
                    // Dégâts au joueur
                    typingState.playerHealth -= 4;
                    if (typingState.playerHealth < 0) typingState.playerHealth = 0;
                    playerHealth.style.width = `${typingState.playerHealth}%`;
                    
                    // Message aléatoire de l'adversaire
                    if (Math.random() < 0.3) {
                        showOpponentSpeech(camilleMessages[Math.floor(Math.random() * camilleMessages.length)]);
                    }
                    
                    // Jouer un son
                    playSound('type');
                    
                    // Vérifier défaite
                    if (typingState.playerHealth <= 0) {
                        endTypingGame('lose');
                        return;
                    }
                    
                    // Continuer la simulation
                    simulateOpponent();
                }, typingState.computerWaitTime);
            }
            
            function updateTimer() {
                typingState.timeLeft--;
                typingTimer.textContent = typingState.timeLeft;
                
                if (typingState.timeLeft <= 0) {
                    // Fin du temps
                    if (typingState.score > typingState.computerWordCount) {
                        endTypingGame('win');
                    } else if (typingState.score < typingState.computerWordCount) {
                        endTypingGame('lose');
                    } else {
                        endTypingGame('tie');
                    }
                }
            }
            
            function endTypingGame(result) {
                // Arrêter le jeu
                typingState.gameActive = false;
                if (typingState.timerInterval) {
                    clearInterval(typingState.timerInterval);
                    typingState.timerInterval = null;
                }
                
                // Désactiver le champ de saisie
                wordInput.disabled = true;
                
                // Réactiver le bouton
                startTypingButton.textContent = 'REDÉMARRER';
                startTypingButton.disabled = false;
                
                // Définir le message
                let title, body;
                
                switch (result) {
                    case 'win':
                        title = "VICTOIRE !";
                        body = `Vous avez tapé ${typingState.score} mots correctement et battu Camille qui n'a tapé que ${typingState.computerWordCount} mots !`;
                        playSound('win');
                        showOpponentSpeech("Non ! C'est impossible ! Je ne peux pas perdre !");
                        // Ajouter une victoire
                        addVictory('typing');
                        break;
                    case 'lose':
                        title = "DÉFAITE !";
                        body = `Vous avez tapé ${typingState.score} mots, mais Camille en a tapé ${typingState.computerWordCount} ! Il est trop rapide !`;
                        playSound('lose');
                        showOpponentSpeech("Ha ha ! Je suis le roi de la frappe ! Camille le nul ? Plutôt Camille le champion !");
                        break;
                    case 'tie':
                        title = "ÉGALITÉ !";
                        body = `Vous avez tous les deux tapé ${typingState.score} mots ! C'est un match nul !`;
                        playSound('card');
                        showOpponentSpeech("Égalité ! C'était serré, on remet ça ?");
                        break;
                }
                
                // Afficher le message
                typingMessageTitle.textContent = title;
                typingMessageBody.textContent = body;
                typingMessage.style.display = 'block';
            }
            
            function handleTypingMessageClose() {
                typingMessage.style.display = 'none';
            }
            
            function showPlayerSpeech(text) {
                playerSpeech.textContent = text;
                playerSpeech.style.opacity = '1';
                
                setTimeout(() => {
                    playerSpeech.style.opacity = '0';
                }, 3000);
            }
            
            function showOpponentSpeech(text) {
                opponentSpeech.textContent = text;
                opponentSpeech.style.opacity = '1';
                
                setTimeout(() => {
                    opponentSpeech.style.opacity = '0';
                }, 3000);
            }
            
            // ===== JEU DE PLATEFORME =====
            const level = document.getElementById('level');
            const gamePlayer = document.getElementById('game-player');
            const livesCount = document.getElementById('lives-count');
            const coinCount = document.getElementById('coin-count');
            const totalCoins = document.getElementById('total-coins');
            const gameMessage = document.getElementById('game-message');
            const gameMessageTitle = document.getElementById('game-message-title');
            const gameMessageBody = document.getElementById('game-message-body');
            const gameMessageButton = document.getElementById('game-message-button');
            
            // Contrôles tactiles
            const leftControl = document.getElementById('left-control');
            const rightControl = document.getElementById('right-control');
            const jumpControl = document.getElementById('jump-control');
            
            // État du jeu de plateforme
            let platformState = {
                player: {
                    x: 100,
                    y: 450,
                    width: 40,
                    height: 60,
                    velocityX: 0,
                    velocityY: 0,
                    speed: 5,
                    jumpPower: 15,
                    isJumping: false,
                    direction: 1 // 1 = droite, -1 = gauche
                },
                platforms: [],
                enemies: [],
                coins: [],
                boss: null,
                lives: 3,
                collectedCoins: 0,
                totalCoins: 0,
                keys: {},
                gameLoopId: null,
                gameOver: false
            };
            
            function initPlatformGame() {
                // Réinitialiser l'état du jeu
                platformState = {
                    player: {
                        x: 100,
                        y: 450,
                        width: 40,
                        height: 60,
                        velocityX: 0,
                        velocityY: 0,
                        speed: 5,
                        jumpPower: 15,
                        isJumping: false,
                        direction: 1
                    },
                    platforms: [],
                    enemies: [],
                    coins: [],
                    boss: null,
                    lives: 3,
                    collectedCoins: 0,
                    totalCoins: 0,
                    keys: {},
                    gameLoopId: null,
                    gameOver: false
                };
                
                // Nettoyer les éléments existants
                clearLevel();
                
                // Créer le niveau
                createLevel();
                
                // Mettre à jour l'affichage
                livesCount.textContent = platformState.lives;
                coinCount.textContent = platformState.collectedCoins;
                totalCoins.textContent = platformState.totalCoins;
                
                // Positionner le joueur
                updatePlayerPosition();
                
                // Configurer les contrôles
                window.removeEventListener('keydown', handlePlatformKeyDown);
                window.removeEventListener('keyup', handlePlatformKeyUp);
                window.addEventListener('keydown', handlePlatformKeyDown);
                window.addEventListener('keyup', handlePlatformKeyUp);
                
                // Configurer les contrôles tactiles
                configureTouch();
                
                // Configurer le bouton de message
                gameMessageButton.removeEventListener('click', handleGameMessageClose);
                gameMessageButton.addEventListener('click', handleGameMessageClose);
                
                // Cacher le message
                gameMessage.style.display = 'none';
                
                // Démarrer la boucle de jeu
                if (platformState.gameLoopId) {
                    cancelAnimationFrame(platformState.gameLoopId);
                }
                platformState.gameLoopId = requestAnimationFrame(gameLoop);
            }
            
            function stopPlatformGame() {
                // Arrêter la boucle de jeu
                if (platformState.gameLoopId) {
                    cancelAnimationFrame(platformState.gameLoopId);
                    platformState.gameLoopId = null;
                }
                
                // Supprimer les événements
                window.removeEventListener('keydown', handlePlatformKeyDown);
                window.removeEventListener('keyup', handlePlatformKeyUp);
                leftControl.removeEventListener('touchstart', handleLeftTouch);
                leftControl.removeEventListener('touchend', handleLeftTouchEnd);
                rightControl.removeEventListener('touchstart', handleRightTouch);
                rightControl.removeEventListener('touchend', handleRightTouchEnd);
                jumpControl.removeEventListener('touchstart', handleJumpTouch);
                gameMessageButton.removeEventListener('click', handleGameMessageClose);
                
                // Nettoyer le niveau
                clearLevel();
            }
            
            function clearLevel() {
                // Supprimer tous les éléments du niveau sauf le joueur et le sol
                const elementsToRemove = level.querySelectorAll('.platform, .enemy, .coin, .camille-boss, .finish-flag');
                elementsToRemove.forEach(element => element.remove());
            }
            
            function createLevel() {
                // Créer les plateformes
                const platformData = [
                    { x: 100, y: 400, width: 200 },
                    { x: 350, y: 350, width: 200 },
                    { x: 600, y: 300, width: 150 },
                    { x: 400, y: 250, width: 150 },
                    { x: 200, y: 200, width: 150 },
                    { x: 400, y: 150, width: 350 }
                ];
                
                platformData.forEach(data => {
                    createPlatform(data.x, data.y, data.width);
                });
                
                // Créer les ennemis
                const enemyData = [
                    { x: 150, y: 340, platform: 0 },
                    { x: 400, y: 290, platform: 1 },
                    { x: 650, y: 240, platform: 2 },
                    { x: 450, y: 190, platform: 3 },
                    { x: 250, y: 140, platform: 4 }
                ];
                
                enemyData.forEach(data => {
                    createEnemy(data.x, data.y, data.platform);
                });
                
                // Créer les pièces
                const coinData = [
                    { x: 200, y: 370 },
                    { x: 450, y: 320 },
                    { x: 650, y: 270 },
                    { x: 450, y: 220 },
                    { x: 250, y: 170 },
                    { x: 450, y: 120 },
                    { x: 550, y: 120 },
                    { x: 650, y: 120 }
                ];
                
                coinData.forEach(data => {
                    createCoin(data.x, data.y);
                });
                
                platformState.totalCoins = coinData.length;
                
                // Créer le boss (Camille le Nul)
                createBoss(700, 90);
                
                // Créer le drapeau d'arrivée
                createFlag(750, 90);
            }
            
            function createPlatform(x, y, width) {
                const platform = document.createElement('div');
                platform.className = 'platform';
                platform.style.left = `${x}px`;
                platform.style.bottom = `${y}px`;
                platform.style.width = `${width}px`;
                level.appendChild(platform);
                
                platformState.platforms.push({
                    x,
                    y,
                    width,
                    height: 30,
                    element: platform
                });
            }
            
            function createEnemy(x, y, platformIndex) {
                const enemy = document.createElement('div');
                enemy.className = 'enemy';
                enemy.textContent = '👾';
                enemy.style.left = `${x}px`;
                enemy.style.bottom = `${y}px`;
                level.appendChild(enemy);
                
                platformState.enemies.push({
                    x,
                    y,
                    width: 40,
                    height: 40,
                    direction: 1,
                    speed: 2,
                    platformIndex,
                    element: enemy
                });
            }
            
            function createCoin(x, y) {
                const coin = document.createElement('div');
                coin.className = 'coin';
                coin.textContent = '🪙';
                coin.style.left = `${x}px`;
                coin.style.bottom = `${y}px`;
                level.appendChild(coin);
                
                platformState.coins.push({
                    x,
                    y,
                    width: 30,
                    height: 30,
                    collected: false,
                    element: coin
                });
            }
            
            function createBoss(x, y) {
                const boss = document.createElement('div');
                boss.className = 'camille-boss';
                boss.textContent = '👨';
                boss.style.left = `${x}px`;
                boss.style.bottom = `${y}px`;
                level.appendChild(boss);
                
                platformState.boss = {
                    x,
                    y,
                    width: 80,
                    height: 80,
                    element: boss
                };
            }
            
            function createFlag(x, y) {
                const flag = document.createElement('div');
                flag.className = 'finish-flag';
                flag.textContent = '🏁';
                flag.style.left = `${x}px`;
                flag.style.bottom = `${y}px`;
                level.appendChild(flag);
            }
            
            function handlePlatformKeyDown(e) {
                platformState.keys[e.key] = true;
                
                // Empêcher le défilement de la page avec les flèches
                if (['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight', ' '].includes(e.key)) {
                    e.preventDefault();
                }
            }
            
            function handlePlatformKeyUp(e) {
                platformState.keys[e.key] = false;
            }
            
            function configureTouch() {
                leftControl.addEventListener('touchstart', handleLeftTouch);
                leftControl.addEventListener('touchend', handleLeftTouchEnd);
                rightControl.addEventListener('touchstart', handleRightTouch);
                rightControl.addEventListener('touchend', handleRightTouchEnd);
                jumpControl.addEventListener('touchstart', handleJumpTouch);
            }
            
            function handleLeftTouch() {
                platformState.keys['ArrowLeft'] = true;
            }
            
            function handleLeftTouchEnd() {
                platformState.keys['ArrowLeft'] = false;
            }
            
            function handleRightTouch() {
                platformState.keys['ArrowRight'] = true;
            }
            
            function handleRightTouchEnd() {
                platformState.keys['ArrowRight'] = false;
            }
            
            function handleJumpTouch() {
                if (!platformState.player.isJumping) {
                    platformState.player.velocityY = platformState.player.jumpPower;
                    platformState.player.isJumping = true;
                    playSound('jump');
                }
            }
            
            function gameLoop() {
                if (platformState.gameOver) return;
                
                // Mettre à jour la position du joueur
                updatePlayer();
                
                // Mettre à jour les ennemis
                updateEnemies();
                
                // Vérifier les collisions
                checkCollisions();
                
                // Continuer la boucle
                platformState.gameLoopId = requestAnimationFrame(gameLoop);
            }
            
            function updatePlayer() {
                const player = platformState.player;
                
                // Mouvement horizontal
                player.velocityX = 0;
                if (platformState.keys['ArrowLeft'] || platformState.keys['a'] || platformState.keys['q']) {
                    player.velocityX = -player.speed;
                    player.direction = -1;
                    gamePlayer.style.transform = 'scaleX(-1)';
                }
                if (platformState.keys['ArrowRight'] || platformState.keys['d']) {
                    player.velocityX = player.speed;
                    player.direction = 1;
                    gamePlayer.style.transform = 'scaleX(1)';
                }
                
                // Appliquer la gravité
                player.velocityY -= 0.5;
                
                // Mettre à jour la position
                player.x += player.velocityX;
                player.y += player.velocityY;
                
                // Limites de l'écran
                if (player.x < 0) player.x = 0;
                if (player.x + player.width > 800) player.x = 800 - player.width;
                
                // Collision avec le sol
                if (player.y <= 80) {
                    player.y = 80;
                    player.velocityY = 0;
                    player.isJumping = false;
                }
                
                // Collision avec les plateformes
                let onPlatform = false;
                platformState.platforms.forEach(platform => {
                    if (
                        player.x + player.width > platform.x &&
                        player.x < platform.x + platform.width &&
                        player.y <= platform.y + platform.height &&
                        player.y + player.velocityY >= platform.y + platform.height
                    ) {
                        player.y = platform.y + platform.height;
                        player.velocityY = 0;
                        player.isJumping = false;
                        onPlatform = true;
                    }
                });
                
                // Sauter si sur une plateforme ou le sol
                if ((platformState.keys['ArrowUp'] || platformState.keys[' '] || platformState.keys['w'] || platformState.keys['z']) && !player.isJumping) {
                    player.velocityY = player.jumpPower;
                    player.isJumping = true;
                    playSound('jump');
                }
                
                // Si le joueur tombe en dehors de l'écran
                if (player.y < 0) {
                    loseLife();
                }
                
                updatePlayerPosition();
            }
            
            function updatePlayerPosition() {
                gamePlayer.style.left = `${platformState.player.x}px`;
                gamePlayer.style.bottom = `${platformState.player.y}px`;
            }
            
            function updateEnemies() {
                platformState.enemies.forEach(enemy => {
                    const platform = platformState.platforms[enemy.platformIndex];
                    
                    // Déplacer l'ennemi sur sa plateforme
                    enemy.x += enemy.direction * enemy.speed;
                    
                    // Inverser la direction aux bords de la plateforme
                    if (enemy.x <= platform.x || enemy.x + enemy.width >= platform.x + platform.width) {
                        enemy.direction *= -1;
                    }
                    
                    // Mettre à jour la position et la direction
                    enemy.element.style.left = `${enemy.x}px`;
                    if (enemy.direction > 0) {
                        enemy.element.style.transform = 'scaleX(1)';
                    } else {
                        enemy.element.style.transform = 'scaleX(-1)';
                    }
                });
            }
            
            function checkCollisions() {
                const player = platformState.player;
                
                // Collisions avec les pièces
                platformState.coins.forEach(coin => {
                    if (!coin.collected &&
                        player.x < coin.x + coin.width &&
                        player.x + player.width > coin.x &&
                        player.y < coin.y + coin.height &&
                        player.y + player.height > coin.y
                    ) {
                        coin.collected = true;
                        coin.element.style.display = 'none';
                        platformState.collectedCoins++;
                        coinCount.textContent = platformState.collectedCoins;
                        playSound('coin');
                    }
                });
                
                // Collisions avec les ennemis
                platformState.enemies.forEach(enemy => {
                    if (
                        player.x < enemy.x + enemy.width &&
                        player.x + player.width > enemy.x &&
                        player.y < enemy.y + enemy.height &&
                        player.y + player.height > enemy.y
                    ) {
                        // Si le joueur saute sur l'ennemi
                        if (player.velocityY < 0 && player.y > enemy.y + enemy.height / 2) {
                            // Écraser l'ennemi
                            enemy.element.style.display = 'none';
                            
                            // Faire rebondir le joueur
                            player.velocityY = player.jumpPower * 0.6;
                            
                            // Supprimer l'ennemi de la liste
                            platformState.enemies = platformState.enemies.filter(e => e !== enemy);
                            
                            playSound('hit');
                        } else {
                            // Sinon, perdre une vie
                            loseLife();
                        }
                    }
                });
                
                // Collision avec le boss
                if (platformState.boss && 
                    player.x < platformState.boss.x + platformState.boss.width &&
                    player.x + player.width > platformState.boss.x &&
                    player.y < platformState.boss.y + platformState.boss.height &&
                    player.y + player.height > platformState.boss.y
                ) {
                    if (platformState.collectedCoins >= platformState.totalCoins) {
                        // Si toutes les pièces sont collectées, victoire
                        winGame();
                    } else {
                        // Sinon, perdre une vie
                        loseLife();
                    }
                }
            }
            
            function loseLife() {
                if (platformState.gameOver) return;
                
                platformState.lives--;
                livesCount.textContent = platformState.lives;
                playSound('death');
                
                // Repositionner le joueur
                platformState.player.x = 100;
                platformState.player.y = 450;
                platformState.player.velocityX = 0;
                platformState.player.velocityY = 0;
                updatePlayerPosition();
                
                if (platformState.lives <= 0) {
                    loseGame();
                }
            }
            
            function loseGame() {
                platformState.gameOver = true;
                
                // Afficher un message de défaite
                gameMessageTitle.textContent = "GAME OVER";
                gameMessageBody.textContent = "Vous avez perdu toutes vos vies ! Camille le Nul vous a vaincu.";
                gameMessage.style.display = 'block';
                
                playSound('lose');
            }
            
            function winGame() {
                platformState.gameOver = true;
                
                // Afficher un message de victoire
                gameMessageTitle.textContent = "VICTOIRE !";
                gameMessageBody.textContent = "Vous avez battu Camille le Nul et collecté toutes les pièces ! Félicitations !";
                gameMessage.style.display = 'block';
                
                playSound('win');
                
                // Ajouter une victoire
                addVictory('platform');
            }
            
            function handleGameMessageClose() {
                gameMessage.style.display = 'none';
                initPlatformGame();
            }
        });
    </script>
</body>
</html>