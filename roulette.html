<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Roulette vs Camille Le Nul</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <style>
        /* --- JEU DE ROULETTE --- */
        #roulette-game {
            background-color: #004d00; /* Vert foncé */
            font-family: 'Press Start 2P', cursive;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            height: 100%;
            position: relative;
            overflow: hidden;
        }
        
        .roulette-container {
            width: 95%;
            height: 85%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            background: linear-gradient(to bottom, #007700, #005500);
            border: 5px solid #daa520; /* Or foncé */
            border-radius: 20px;
            padding: 20px;
            margin-top: 40px;
            box-shadow: 0 0 30px rgba(218, 165, 32, 0.3);
        }
        
        .roulette-header {
            display: flex;
            justify-content: space-between;
            width: 100%;
            margin-bottom: 25px;
        }
        
        .roulette-credits {
            background-color: rgba(0, 0, 0, 0.7);
            color: #daa520;
            padding: 15px 20px;
            border: 3px solid #daa520;
            border-radius: 10px;
            font-size: 18px;
            box-shadow: 0 0 15px rgba(218, 165, 32, 0.3);
        }
        
        .roulette-wheel-container {
            position: relative;
            width: 350px;
            height: 350px;
            margin-bottom: 30px;
            perspective: 1000px;
        }
        
        .roulette-wheel {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: linear-gradient(135deg, #9a0000, #800000);
            border: 12px solid #daa520;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            transition: transform 5s cubic-bezier(0.2, 0.8, 0.2, 1);
            box-shadow: 0 0 30px rgba(218, 165, 32, 0.5), 
                inset 0 0 50px rgba(0, 0, 0, 0.5);
            transform-style: preserve-3d;
        }
        
        .roulette-wheel::after {
            content: '';
            position: absolute;
            width: 90%;
            height: 90%;
            border-radius: 50%;
            box-shadow: inset 0 0 30px rgba(0, 0, 0, 0.7);
            pointer-events: none;
        }
        
        .roulette-wheel-center {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(to bottom, #ffd700, #daa520);
            z-index: 10;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #800000;
            font-weight: bold;
            font-size: 20px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
            border: 3px solid #ffd700;
        }
        
        .roulette-wheel-center:hover {
            cursor: pointer;
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.6);
        }
        
        .roulette-number {
            position: absolute;
            width: 40px;
            height: 140px;
            transform-origin: bottom center;
            display: flex;
            justify-content: center;
            padding-top: 15px;
            font-size: 18px;
            color: white;
            text-shadow: 0 0 2px rgba(0, 0, 0, 0.8);
            font-weight: bold;
            border-left: 1px solid rgba(255, 255, 255, 0.2);
            border-right: 1px solid rgba(0, 0, 0, 0.3);
        }
        
        .roulette-ball {
            position: absolute;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, white, #c0c0c0);
            top: calc(50% - 10px);
            left: calc(50% - 10px);
            z-index: 5;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
            display: none;
        }
        
        @keyframes spinBall {
            0% {
                transform: rotate(0deg) translateY(-140px) rotate(0deg);
            }
            30% {
                transform: rotate(3600deg) translateY(-140px) rotate(-3600deg);
            }
            40% {
                transform: rotate(4320deg) translateY(-135px) rotate(-4320deg);
            }
            50% {
                transform: rotate(4680deg) translateY(-130px) rotate(-4680deg);
            }
            60% {
                transform: rotate(4860deg) translateY(-125px) rotate(-4860deg);
            }
            70% {
                transform: rotate(4950deg) translateY(-120px) rotate(-4950deg);
            }
            80% {
                transform: rotate(5040deg) translateY(-115px) rotate(-5040deg);
            }
            90% {
                transform: rotate(5085deg) translateY(-110px) rotate(-5085deg);
            }
            100% {
                transform: rotate(5120deg) translateY(-110px) rotate(-5120deg);
            }
        }
        
        .roulette-ball-container {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            transform-style: preserve-3d;
            z-index: 6;
        }
        
        .spin-track {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 5px solid transparent;
            border-top: 5px solid rgba(255, 255, 255, 0.3);
            box-sizing: border-box;
            top: -5px;
            left: -5px;
            animation: spinTrack 5s linear infinite;
            display: none;
            pointer-events: none;
        }
        
        @keyframes spinTrack {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .roulette-selection {
            display: flex;
            justify-content: space-around;
            width: 95%;
            margin-top: 30px;
            gap: 20px;
        }
        
        .roulette-bet-option {
            background: linear-gradient(to bottom, #333, #222);
            color: white;
            border: 3px solid #daa520;
            border-radius: 10px;
            padding: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 30%;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .roulette-bet-option:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.4), 0 0 15px rgba(218, 165, 32, 0.5);
        }
        
        .roulette-bet-option.selected {
            border-color: white;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.8);
            transform: scale(1.05);
        }
        
        .bet-label {
            margin-bottom: 15px;
            font-size: 16px;
            text-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
        }
        
        .bet-color-display {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            margin-bottom: 15px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
            border: 2px solid rgba(255, 255, 255, 0.5);
            transition: all 0.3s;
        }
        
        .roulette-bet-option:hover .bet-color-display {
            transform: scale(1.1);
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
        }
        
        .bet-color-red {
            background: linear-gradient(135deg, #ff0000, #cc0000);
        }
        
        .bet-color-black {
            background: linear-gradient(135deg, #333, #000);
        }
        
        .bet-color-green {
            background: linear-gradient(135deg, #00cc00, #009900);
        }
        
        .bet-payout {
            font-size: 14px;
            color: #daa520;
            background-color: rgba(0, 0, 0, 0.3);
            padding: 8px 12px;
            border-radius: 5px;
            margin-top: 10px;
        }
        
        .roulette-controls {
            display: flex;
            justify-content: space-around;
            width: 95%;
            margin-top: 30px;
            background-color: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 15px;
            border: 2px solid rgba(218, 165, 32, 0.5);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .roulette-bet-amount {
            display: flex;
            align-items: center;
        }
        
        .bet-button {
            background: linear-gradient(to bottom, #555, #333);
            color: white;
            border: 3px solid #daa520;
            border-radius: 10px;
            padding: 15px;
            font-family: 'Press Start 2P', cursive;
            font-size: 20px;
            width: 50px;
            height: 50px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: all 0.2s;
            margin: 0 15px;
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.3);
        }
        
        .bet-button:hover:not(:disabled) {
            background: linear-gradient(to bottom, #777, #555);
            transform: translateY(-3px);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.4);
        }
        
        .bet-button:active:not(:disabled) {
            transform: translateY(2px);
            box-shadow: 0 3px 5px rgba(0, 0, 0, 0.3);
        }
        
        .bet-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            box-shadow: none;
        }
        
        .bet-amount-display {
            background-color: rgba(0, 0, 0, 0.7);
            color: #daa520;
            padding: 15px 20px;
            border: 3px solid #daa520;
            border-radius: 10px;
            min-width: 120px;
            text-align: center;
            font-size: 16px;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.5);
        }
        
        .spin-button {
            background: linear-gradient(to bottom, #daa520, #b8860b);
            color: #000;
            border: none;
            border-radius: 12px;
            padding: 18px 30px;
            font-family: 'Press Start 2P', cursive;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            text-shadow: 0 1px 2px rgba(255, 255, 255, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .spin-button::after {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.3) 0%, rgba(255,255,255,0) 70%);
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .spin-button:hover:not(:disabled) {
            background: linear-gradient(to bottom, #ffd700, #daa520);
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.4);
        }
        
        .spin-button:hover::after {
            opacity: 1;
        }
        
        .spin-button:active:not(:disabled) {
            transform: translateY(2px);
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.3);
        }
        
        .spin-button:disabled {
            background: linear-gradient(to bottom, #aaa, #888);
            cursor: not-allowed;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
            color: #555;
        }
        
        .roulette-result {
            margin-top: 25px;
            min-height: 50px;
            font-size: 18px;
            color: white;
            text-align: center;
            background-color: rgba(0, 0, 0, 0.5);
            padding: 15px;
            border-radius: 10px;
            width: 90%;
            border: 2px solid #daa520;
            box-shadow: 0 0 15px rgba(218, 165, 32, 0.3);
            text-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
            transition: all 0.3s;
        }
        
        .roulette-result.win {
            background-color: rgba(0, 100, 0, 0.7);
            border-color: #ffd700;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.6);
            animation: resultPulse 1.5s infinite;
        }
        
        .roulette-result.lose {
            background-color: rgba(100, 0, 0, 0.7);
        }
        
        @keyframes resultPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.03); }
            100% { transform: scale(1); }
        }
        
        .roulette-camille {
            position: absolute;
            bottom: 30px;
            right: 30px;
            font-size: 60px;
            filter: drop-shadow(0 0 10px rgba(0, 0, 0, 0.5));
            transition: all 0.3s;
        }
        
        .roulette-camille.excited {
            animation: camilleExcited 0.5s infinite alternate;
        }
        
        @keyframes camilleExcited {
            0% { transform: rotate(-5deg) scale(1); }
            100% { transform: rotate(5deg) scale(1.1); }
        }
        
        .roulette-message {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 40px;
            border-radius: 15px;
            border: 4px solid #daa520;
            text-align: center;
            z-index: 200;
            display: none;
            min-width: 450px;
            box-shadow: 0 0 40px rgba(218, 165, 32, 0.4);
        }
        
        .roulette-message-title {
            font-size: 28px;
            margin-bottom: 25px;
            color: #daa520;
            text-shadow: 0 0 10px rgba(218, 165, 32, 0.5);
        }
        
        .roulette-message-body {
            margin-bottom: 35px;
            line-height: 1.6;
            font-size: 18px;
        }
        
        .roulette-message-button {
            background: linear-gradient(to bottom, #daa520, #b8860b);
            color: #000;
            border: none;
            padding: 18px 35px;
            font-family: 'Press Start 2P', cursive;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.3s;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .roulette-message-button:hover {
            background: linear-gradient(to bottom, #ffd700, #daa520);
            transform: scale(1.05);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
        }
        
        .roulette-message-button:active {
            transform: scale(0.98);
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.3);
        }
        
        .speech-bubble {
            position: absolute;
            background-color: white;
            color: black;
            padding: 15px;
            border-radius: 15px;
            max-width: 250px;
            font-size: 14px;
            opacity: 0;
            transition: opacity 0.3s;
            z-index: 10;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            border: 2px solid #333;
        }
        
        .camille-speech {
            right: 120px;
            bottom: 80px;
        }
        
        .camille-speech:after {
            content: "";
            position: absolute;
            right: -15px;
            bottom: 30px;
            border: 15px solid transparent;
            border-left-color: white;
            margin-top: -15px;
        }
        
        .back-button, .game-victory-counter {
            position: absolute;
            top: 20px;
            z-index: 100;
            font-size: 16px;
            padding: 12px 18px;
            background-color: rgba(0, 0, 0, 0.7);
            border: 2px solid #fff;
            border-radius: 8px;
            color: white;
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.3);
            text-decoration: none;
        }
        
        .back-button {
            left: 20px;
        }
        
        .game-victory-counter {
            right: 20px;
        }
        
        /* Responsive design */
        @media (max-width: 992px) {
            .roulette-wheel-container {
                width: 300px;
                height: 300px;
            }
            
            .roulette-wheel-center {
                width: 70px;
                height: 70px;
                font-size: 18px;
            }
            
            .roulette-number {
                width: 35px;
                height: 120px;
                font-size: 16px;
            }
            
            .roulette-bet-option {
                padding: 12px;
            }
            
            .bet-label {
                font-size: 14px;
            }
            
            .bet-color-display {
                width: 40px;
                height: 40px;
            }
            
            .bet-payout {
                font-size: 12px;
            }
            
            .roulette-controls {
                flex-direction: column;
                align-items: center;
                gap: 20px;
            }
            
            .spin-button {
                padding: 15px 25px;
                font-size: 16px;
            }
            
            .roulette-message {
                min-width: 350px;
                padding: 30px;
            }
            
            .roulette-message-title {
                font-size: 24px;
            }
            
            .roulette-message-body {
                font-size: 16px;
            }
            
            .roulette-message-button {
                padding: 15px 25px;
                font-size: 16px;
            }
        }
        
        @media (max-width: 768px) {
            .roulette-wheel-container {
                width: 250px;
                height: 250px;
            }
            
            .roulette-wheel-center {
                width: 60px;
                height: 60px;
                font-size: 16px;
            }
            
            .roulette-number {
                width: 30px;
                height: 100px;
                font-size: 14px;
            }
            
            .roulette-selection {
                flex-direction: column;
                align-items: center;
                gap: 15px;
            }
            
            .roulette-bet-option {
                width: 80%;
                flex-direction: row;
                justify-content: space-between;
                align-items: center;
                padding: 10px 15px;
            }
            
            .bet-label {
                margin-bottom: 0;
                font-size: 12px;
                flex: 1;
                text-align: left;
            }
            
            .bet-color-display {
                width: 30px;
                height: 30px;
                margin-bottom: 0;
                margin-right: 10px;
            }
            
            .bet-payout {
                font-size: 10px;
                margin-top: 0;
            }
            
            .roulette-result {
                font-size: 14px;
            }
            
            .roulette-camille {
                font-size: 40px;
                right: 20px;
                bottom: 20px;
            }
            
            .camille-speech {
                right: 80px;
                bottom: 60px;
                max-width: 200px;
                font-size: 12px;
            }
            
            .roulette-message {
                min-width: 300px;
                padding: 20px;
            }
            
            .roulette-message-title {
                font-size: 20px;
            }
            
            .roulette-message-body {
                font-size: 14px;
            }
            
            .roulette-message-button {
                padding: 12px 20px;
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <div id="game-container">
        <!-- Jeu de Roulette -->
        <div id="roulette-game">
            <a href="index.html" class="back-button">← RETOUR</a>
            <div class="game-victory-counter">Victoires: <span id="roulette-victories">0</span></div>
            
            <div class="roulette-container">
                <div class="roulette-header">
                    <div class="roulette-credits">Crédits: <span id="roulette-credits">100</span></div>
                </div>
                
                <div class="roulette-wheel-container">
                    <div class="roulette-wheel" id="roulette-wheel">
                        <!-- Les numéros seront ajoutés dynamiquement -->
                    </div>
                    <div class="roulette-wheel-center">
                        <span>SPIN</span>
                    </div>
                    <div class="spin-track" id="spin-track"></div>
                    <div class="roulette-ball-container">
                        <div class="roulette-ball" id="roulette-ball"></div>
                    </div>
                </div>
                
                <div class="roulette-result" id="roulette-result"></div>
                
                <div class="roulette-selection">
                    <div class="roulette-bet-option" data-bet="red">
                        <div class="bet-label">ROUGE</div>
                        <div class="bet-color-display bet-color-red"></div>
                        <div class="bet-payout">PAYE x2</div>
                    </div>
                    <div class="roulette-bet-option" data-bet="black">
                        <div class="bet-label">NOIR</div>
                        <div class="bet-color-display bet-color-black"></div>
                        <div class="bet-payout">PAYE x2</div>
                    </div>
                    <div class="roulette-bet-option" data-bet="green">
                        <div class="bet-label">VERT (0)</div>
                        <div class="bet-color-display bet-color-green"></div>
                        <div class="bet-payout">PAYE x14</div>
                    </div>
                </div>
                
                <div class="roulette-controls">
                    <div class="roulette-bet-amount">
                        <button class="bet-button" id="bet-down">-</button>
                        <div class="bet-amount-display">Mise: <span id="bet-amount">10</span></div>
                        <button class="bet-button" id="bet-up">+</button>
                    </div>
                    
                    <button class="spin-button" id="spin-button">LANCER</button>
                </div>
                
                <div class="roulette-camille" id="roulette-camille">👨</div>
            </div>
            
            <div id="camille-speech" class="speech-bubble camille-speech"></div>
            
            <div id="roulette-message" class="roulette-message">
                <div id="roulette-message-title" class="roulette-message-title"></div>
                <div id="roulette-message-body" class="roulette-message-body"></div>
                <button id="roulette-message-button" class="roulette-message-button">OK</button>
            </div>
        </div>
        
        <div class="scanline"></div>
        <div class="vignette"></div>
        <div class="crt-effect"></div>
        <div class="pixel-transition" id="transition"></div>
    </div>
    
    <script src="common.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Fonction spécifique pour mettre à jour les victoires sur cette page
            window.updateVictoryDisplaysPage = function() {
                document.getElementById('roulette-victories').textContent = gameVictories.roulette || 0;
            };
            
            // Éléments DOM
            const rouletteWheel = document.getElementById('roulette-wheel');
            const rouletteBall = document.getElementById('roulette-ball');
            const spinTrack = document.getElementById('spin-track');
            const spinButton = document.getElementById('spin-button');
            const rouletteWheelCenter = document.querySelector('.roulette-wheel-center');
            const betOptions = document.querySelectorAll('.roulette-bet-option');
            const betDownButton = document.getElementById('bet-down');
            const betUpButton = document.getElementById('bet-up');
            const betAmountDisplay = document.getElementById('bet-amount');
            const creditsDisplay = document.getElementById('roulette-credits');
            const resultDisplay = document.getElementById('roulette-result');
            const camilleFigure = document.getElementById('roulette-camille');
            const camilleSpeech = document.getElementById('camille-speech');
            const rouletteMessage = document.getElementById('roulette-message');
            const rouletteMessageTitle = document.getElementById('roulette-message-title');
            const rouletteMessageBody = document.getElementById('roulette-message-body');
            const rouletteMessageButton = document.getElementById('roulette-message-button');
            
            // Configuration des numéros de la roulette
            const rouletteNumbers = [
                { number: 0, color: 'green' },
                { number: 32, color: 'red' },
                { number: 15, color: 'black' },
                { number: 19, color: 'red' },
                { number: 4, color: 'black' },
                { number: 21, color: 'red' },
                { number: 2, color: 'black' },
                { number: 25, color: 'red' },
                { number: 17, color: 'black' },
                { number: 34, color: 'red' },
                { number: 6, color: 'black' },
                { number: 27, color: 'red' },
                { number: 13, color: 'black' },
                { number: 36, color: 'red' },
                { number: 11, color: 'black' },
                { number: 30, color: 'red' },
                { number: 8, color: 'black' },
                { number: 23, color: 'red' },
                { number: 10, color: 'black' },
                { number: 5, color: 'red' },
                { number: 24, color: 'black' },
                { number: 16, color: 'red' },
                { number: 33, color: 'black' },
                { number: 1, color: 'red' },
                { number: 20, color: 'black' },
                { number: 14, color: 'red' },
                { number: 31, color: 'black' },
                { number: 9, color: 'red' },
                { number: 22, color: 'black' },
                { number: 18, color: 'red' },
                { number: 29, color: 'black' },
                { number: 7, color: 'red' },
                { number: 28, color: 'black' },
                { number: 12, color: 'red' },
                { number: 35, color: 'black' },
                { number: 3, color: 'red' },
                { number: 26, color: 'black' }
            ];
            
            // Messages amusants pour Camille
            const camilleMessages = [
                "Je mise toujours sur le rouge, c'est ma couleur porte-bonheur !",
                "Laisse-moi te montrer comment jouer à la roulette !",
                "Le noir va gagner cette fois, j'en suis certain !",
                "J'ai un système infaillible pour la roulette !",
                "Tu ne peux pas battre le hasard, mais moi je peux !",
                "Je sens que le zéro va sortir... ou pas !",
                "La roulette, c'est mon jeu préféré !",
                "La chance est de mon côté aujourd'hui !",
                "J'ai étudié les probabilités... ou presque !"
            ];
            
            // État du jeu
            let rouletteState = {
                credits: 100,
                betAmount: 10,
                selectedBet: null,
                spinning: false,
                winningNumber: null,
                winningColor: null,
                camilleCredits: 100,
                camilleBet: null,
                gamesPlayed: 0,
                playerWins: 0,
                camilleWins: 0
            };
            
            // Initialiser le jeu
            function initRouletteGame() {
                // Réinitialiser l'état du jeu
                rouletteState = {
                    credits: 100,
                    betAmount: 10,
                    selectedBet: null,
                    spinning: false,
                    winningNumber: null,
                    winningColor: null,
                    camilleCredits: 100,
                    camilleBet: null,
                    gamesPlayed: 0,
                    playerWins: 0,
                    camilleWins: 0
                };
                
                // Créer la roue de roulette
                createRouletteWheel();
                
                // Mettre à jour l'affichage
                updateRouletteDisplay();
                
                // Réinitialiser les styles et animations
                rouletteWheel.style.transform = 'rotate(0deg)';
                resultDisplay.textContent = '';
                resultDisplay.classList.remove('win', 'lose');
                camilleFigure.classList.remove('excited');
                
                // Masquer la balle et la piste
                rouletteBall.style.display = 'none';
                spinTrack.style.display = 'none';
                
                // Réinitialiser l'animation de la balle
                rouletteBall.style.animation = 'none';
                
                // Configurer les événements
                spinButton.removeEventListener('click', spinRouletteWheel);
                rouletteWheelCenter.removeEventListener('click', spinRouletteWheel);
                betOptions.forEach(option => {
                    option.removeEventListener('click', selectBet);
                    option.addEventListener('click', selectBet);
                });
                betDownButton.removeEventListener('click', decreaseBet);
                betUpButton.removeEventListener('click', increaseBet);
                spinButton.addEventListener('click', spinRouletteWheel);
                rouletteWheelCenter.addEventListener('click', spinRouletteWheel);
                betDownButton.addEventListener('click', decreaseBet);
                betUpButton.addEventListener('click', increaseBet);
                rouletteMessageButton.removeEventListener('click', handleRouletteMessageClose);
                rouletteMessageButton.addEventListener('click', handleRouletteMessageClose);
                
                // Désélectionner tous les paris
                betOptions.forEach(option => {
                    option.classList.remove('selected');
                });
                
                // Masquer le message
                rouletteMessage.style.display = 'none';
                
                // Message de bienvenue
                showCamilleSpeech("Prêt à jouer à la roulette ? J'ai un système infaillible !");
            }
            
            // Créer la roue de roulette
            function createRouletteWheel() {
                rouletteWheel.innerHTML = '';
                
                // Créer les segments pour chaque numéro
                rouletteNumbers.forEach((item, index) => {
                    const segment = document.createElement('div');
                    segment.className = 'roulette-number';
                    segment.style.transform = `rotate(${index * (360 / rouletteNumbers.length)}deg)`;
                    segment.style.backgroundColor = item.color;
                    segment.textContent = item.number;
                    rouletteWheel.appendChild(segment);
                });
            }
            
            // Mettre à jour l'affichage
            function updateRouletteDisplay() {
                creditsDisplay.textContent = rouletteState.credits;
                betAmountDisplay.textContent = rouletteState.betAmount;
                
                // Activer/désactiver le bouton de lancement
                const canSpin = !rouletteState.spinning && rouletteState.selectedBet !== null && rouletteState.credits >= rouletteState.betAmount;
                spinButton.disabled = !canSpin;
                
                // Activer/désactiver les boutons de mise
                betDownButton.disabled = rouletteState.spinning || rouletteState.betAmount <= 5;
                betUpButton.disabled = rouletteState.spinning || rouletteState.betAmount >= 50 || rouletteState.betAmount >= rouletteState.credits;
            }
            
            // Sélectionner un pari
            function selectBet() {
                if (rouletteState.spinning) return;
                
                // Désélectionner tous les paris
                betOptions.forEach(option => {
                    option.classList.remove('selected');
                });
                
                // Sélectionner le pari actuel
                this.classList.add('selected');
                rouletteState.selectedBet = this.getAttribute('data-bet');
                
                // Mettre à jour l'affichage
                updateRouletteDisplay();
                
                // Jouer un son
                playSound('select');
            }
            
            // Diminuer la mise
            function decreaseBet() {
                if (rouletteState.spinning) return;
                
                rouletteState.betAmount = Math.max(5, rouletteState.betAmount - 5);
                updateRouletteDisplay();
                playSound('select');
            }
            
            // Augmenter la mise
            function increaseBet() {
                if (rouletteState.spinning) return;
                
                rouletteState.betAmount = Math.min(rouletteState.credits, Math.min(50, rouletteState.betAmount + 5));
                updateRouletteDisplay();
                playSound('select');
            }
            
            // Faire tourner la roue
            function spinRouletteWheel() {
                if (rouletteState.spinning || rouletteState.selectedBet === null || rouletteState.credits < rouletteState.betAmount) return;
                
                // Préparer le lancement
                rouletteState.spinning = true;
                resultDisplay.textContent = 'La balle tourne...';
                resultDisplay.classList.remove('win', 'lose');
                
                // Animation de Camille
                camilleFigure.classList.add('excited');
                
                // Déduire la mise
                rouletteState.credits -= rouletteState.betAmount;
                
                // Choisir le pari de Camille (aléatoire)
                const betOptions = ['red', 'black', 'green'];
                const weights = [0.45, 0.45, 0.1]; // Réduire les chances de choisir green
                
                // Sélection pondérée
                let randomValue = Math.random();
                let cumulativeWeight = 0;
                let selectedIndex = 0;
                
                for (let i = 0; i < weights.length; i++) {
                    cumulativeWeight += weights[i];
                    if (randomValue <= cumulativeWeight) {
                        selectedIndex = i;
                        break;
                    }
                }
                
                rouletteState.camilleBet = betOptions[selectedIndex];
                
                // Montrer le pari de Camille
                let camilleMessage;
                switch (rouletteState.camilleBet) {
                    case 'red':
                        camilleMessage = "Je mise sur le rouge cette fois !";
                        break;
                    case 'black':
                        camilleMessage = "Le noir va gagner, c'est sûr !";
                        break;
                    case 'green':
                        camilleMessage = "Je tente le zéro, c'est risqué mais ça paye gros !";
                        break;
                }
                showCamilleSpeech(camilleMessage);
                
                // Mettre à jour l'affichage
                updateRouletteDisplay();
                
                // Choisir un numéro gagnant aléatoire
                const winningIndex = Math.floor(Math.random() * rouletteNumbers.length);
                rouletteState.winningNumber = rouletteNumbers[winningIndex].number;
                rouletteState.winningColor = rouletteNumbers[winningIndex].color;
                
                // Calculer l'angle de rotation
                const rotationAngle = 360 * 10 + (360 - (winningIndex * (360 / rouletteNumbers.length)));
                
                // Jouer un son
                playSound('start');
                
                // Afficher la balle et la piste
                rouletteBall.style.display = 'block';
                spinTrack.style.display = 'block';
                
                // Animer la roue
                rouletteWheel.style.transition = 'transform 5s cubic-bezier(0.2, 0.8, 0.2, 1)';
                rouletteWheel.style.transform = `rotate(${rotationAngle}deg)`;
                
                // Animer la balle
                setTimeout(() => {
                    rouletteBall.style.animation = 'spinBall 5s forwards';
                }, 10);
                
                // Attendre la fin de l'animation
                setTimeout(() => {
                    // Arrêter l'animation de la piste
                    spinTrack.style.display = 'none';
                    
                    // Arrêter l'animation de Camille
                    camilleFigure.classList.remove('excited');
                    
                    // Vérifier les résultats
                    checkRouletteResults();
                    
                    // Jeu terminé, activer les boutons
                    rouletteState.spinning = false;
                    updateRouletteDisplay();
                    
                    // Incrémenter le compteur de parties jouées
                    rouletteState.gamesPlayed++;
                    
                    // Vérifier si le joueur a gagné ou perdu la partie globale
                    checkRouletteGameEnd();
                }, 5500);
            }
            
            // Vérifier les résultats
            function checkRouletteResults() {
                let playerWin = false;
                let camilleWin = false;
                let winMessage = '';
                
                // Effet sonore pour le résultat
                setTimeout(() => {
                    playSound('card');
                }, 300);
                
                // Vérifier si le joueur a gagné
                if (
                    (rouletteState.selectedBet === 'red' && rouletteState.winningColor === 'red') ||
                    (rouletteState.selectedBet === 'black' && rouletteState.winningColor === 'black')
                ) {
                    const winAmount = rouletteState.betAmount * 2;
                    rouletteState.credits += winAmount;
                    winMessage = `${rouletteState.winningNumber} ${rouletteState.winningColor.toUpperCase()}. Vous gagnez ${winAmount} crédits !`;
                    playerWin = true;
                    rouletteState.playerWins++;
                    
                    resultDisplay.classList.add('win');
                    setTimeout(() => playSound('win'), 500);
                } else if (rouletteState.selectedBet === 'green' && rouletteState.winningColor === 'green') {
                    const winAmount = rouletteState.betAmount * 14;
                    rouletteState.credits += winAmount;
                    winMessage = `${rouletteState.winningNumber} ${rouletteState.winningColor.toUpperCase()}. JACKPOT! Vous gagnez ${winAmount} crédits !`;
                    playerWin = true;
                    rouletteState.playerWins++;
                    
                    resultDisplay.classList.add('win');
                    setTimeout(() => playSound('win'), 500);
                } else {
                    winMessage = `${rouletteState.winningNumber} ${rouletteState.winningColor.toUpperCase()}. Vous perdez votre mise de ${rouletteState.betAmount} crédits.`;
                    resultDisplay.classList.add('lose');
                    setTimeout(() => playSound('lose'), 500);
                }
                
                // Vérifier si Camille a gagné
                if (
                    (rouletteState.camilleBet === 'red' && rouletteState.winningColor === 'red') ||
                    (rouletteState.camilleBet === 'black' && rouletteState.winningColor === 'black')
                ) {
                    camilleWin = true;
                    rouletteState.camilleWins++;
                    if (playerWin) {
                        showCamilleSpeech("Nous avons tous les deux gagné cette fois !");
                    } else {
                        showCamilleSpeech("Ha ha ! J'ai gagné et tu as perdu ! Je te l'avais dit !");
                    }
                } else if (rouletteState.camilleBet === 'green' && rouletteState.winningColor === 'green') {
                    camilleWin = true;
                    rouletteState.camilleWins++;
                    showCamilleSpeech("JACKPOT ! Je savais que le zéro allait sortir !");
                } else {
                    if (playerWin) {
                        showCamilleSpeech("Non ! J'ai perdu ! C'est impossible, j'ai un système infaillible !");
                    } else {
                        showCamilleSpeech("Nous avons tous les deux perdu... ce n'est pas notre jour !");
                    }
                }
                
                resultDisplay.textContent = winMessage;
                
                // Mettre à jour l'affichage
                updateRouletteDisplay();
            }
            
            // Vérifier si le jeu est terminé
            function checkRouletteGameEnd() {
                if (rouletteState.credits < 5) {
                    // Plus assez de crédits pour jouer
                    endRouletteGame('lose');
                } else if (rouletteState.credits >= 200) {
                    // Le joueur a doublé ses crédits
                    endRouletteGame('win');
                } else if (rouletteState.gamesPlayed >= 10) {
                    // 10 tours joués, comparer les victoires
                    if (rouletteState.playerWins > rouletteState.camilleWins) {
                        endRouletteGame('win');
                    } else if (rouletteState.playerWins < rouletteState.camilleWins) {
                        endRouletteGame('lose');
                    } else {
                        // Égalité, comparer les crédits
                        if (rouletteState.credits > 100) {
                            endRouletteGame('win');
                        } else {
                            endRouletteGame('lose');
                        }
                    }
                }
            }
            
            // Terminer le jeu
            function endRouletteGame(result) {
                let title, body;
                
                switch (result) {
                    case 'win':
                        title = "VICTOIRE !";
                        body = `Félicitations ! Vous avez terminé avec ${rouletteState.credits} crédits et ${rouletteState.playerWins} victoires, battant Camille Le Nul à la roulette !`;
                        playSound('win');
                        
                        // Ajouter une victoire
                        if (!gameVictories.roulette) {
                            gameVictories.roulette = 0;
                        }
                        addVictory('roulette');
                        break;
                    case 'lose':
                        title = "DÉFAITE !";
                        body = `Dommage ! Vous avez terminé avec seulement ${rouletteState.credits} crédits et ${rouletteState.playerWins} victoires. Camille Le Nul vous a battu à la roulette !`;
                        playSound('lose');
                        break;
                }
                
                // Afficher le message
                rouletteMessageTitle.textContent = title;
                rouletteMessageBody.textContent = body;
                rouletteMessage.style.display = 'block';
            }
            
            // Fermer le message
            function handleRouletteMessageClose() {
                rouletteMessage.style.display = 'none';
                initRouletteGame(); // Réinitialiser le jeu
            }
            
            // Afficher un message de Camille
            function showCamilleSpeech(text) {
                camilleSpeech.textContent = text;
                camilleSpeech.style.opacity = '1';
                
                setTimeout(() => {
                    camilleSpeech.style.opacity = '0';
                }, 3000);
            }
            
            // Initialiser le jeu
            initRouletteGame();
            
            // Mettre à jour l'affichage des victoires
            loadVictories();
        });
    </script>
</body>
</html>